/*! For license information please see app.js.LICENSE.txt */
!function(){var t={79742:function(t,e){"use strict";e.byteLength=function(t){var e=a(t),r=e[0],o=e[1];return 3*(r+o)/4-o},e.toByteArray=function(t){var e,r,i=a(t),s=i[0],l=i[1],c=new n(function(t,e,r){return 3*(e+r)/4-r}(0,s,l)),u=0,f=l>0?s-4:s;for(r=0;r<f;r+=4)e=o[t.charCodeAt(r)]<<18|o[t.charCodeAt(r+1)]<<12|o[t.charCodeAt(r+2)]<<6|o[t.charCodeAt(r+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;2===l&&(e=o[t.charCodeAt(r)]<<2|o[t.charCodeAt(r+1)]>>4,c[u++]=255&e);1===l&&(e=o[t.charCodeAt(r)]<<10|o[t.charCodeAt(r+1)]<<4|o[t.charCodeAt(r+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e);return c},e.fromByteArray=function(t){for(var e,o=t.length,n=o%3,i=[],s=16383,a=0,c=o-n;a<c;a+=s)i.push(l(t,a,a+s>c?c:a+s));1===n?(e=t[o-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===n&&(e=(t[o-2]<<8)+t[o-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=i[s],o[i.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t,e,o){for(var n,i,s=[],a=e;a<o;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(i=n)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},48764:function(t,e,r){"use strict";var o=r(79742),n=r(80645),i=r(5826);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,r)}function c(t,e,r,o){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,o){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(o||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===o?new Uint8Array(e):void 0===o?new Uint8Array(e,r):new Uint8Array(e,r,o);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e);return t}(t,e,r,o):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var o=0|h(e,r);t=a(t,o);var n=t.write(e,r);n!==o&&(t=t.slice(0,n));return t}(t,e,r):function(t,e){if(l.isBuffer(e)){var r=0|p(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(o=e.length)!=o?a(t,0):d(t,e);if("Buffer"===e.type&&i(e.data))return d(t,e.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(u(e),t=a(t,e<0?0:0|p(e)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function d(t,e){var r=e.length<0?0:0|p(e.length);t=a(t,r);for(var o=0;o<r;o+=1)t[o]=255&e[o];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function h(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(t).length;default:if(o)return B(t).length;e=(""+e).toLowerCase(),o=!0}}function m(t,e,r){var o=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,r);case"utf8":case"utf-8":return k(this,e,r);case"ascii":return T(this,e,r);case"latin1":case"binary":return x(this,e,r);case"base64":return O(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,r);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function v(t,e,r){var o=t[e];t[e]=t[r],t[r]=o}function y(t,e,r,o,n){if(0===t.length)return-1;if("string"==typeof r?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof e&&(e=l.from(e,o)),l.isBuffer(e))return 0===e.length?-1:g(t,e,r,o,n);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):g(t,[e],r,o,n);throw new TypeError("val must be string, number or Buffer")}function g(t,e,r,o,n){var i,s=1,a=t.length,l=e.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(n){var u=-1;for(i=r;i<a;i++)if(c(t,i)===c(e,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===l)return u*s}else-1!==u&&(i-=i-u),u=-1}else for(r+l>a&&(r=a-l),i=r;i>=0;i--){for(var f=!0,d=0;d<l;d++)if(c(t,i+d)!==c(e,d)){f=!1;break}if(f)return i}return-1}function b(t,e,r,o){r=Number(r)||0;var n=t.length-r;o?(o=Number(o))>n&&(o=n):o=n;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");o>i/2&&(o=i/2);for(var s=0;s<o;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function _(t,e,r,o){return H(B(e,t.length-r),t,r,o)}function w(t,e,r,o){return H(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,o)}function C(t,e,r,o){return w(t,e,r,o)}function S(t,e,r,o){return H(V(e),t,r,o)}function D(t,e,r,o){return H(function(t,e){for(var r,o,n,i=[],s=0;s<t.length&&!((e-=2)<0);++s)o=(r=t.charCodeAt(s))>>8,n=r%256,i.push(n),i.push(o);return i}(e,t.length-r),t,r,o)}function O(t,e,r){return 0===e&&r===t.length?o.fromByteArray(t):o.fromByteArray(t.slice(e,r))}function k(t,e,r){r=Math.min(t.length,r);for(var o=[],n=e;n<r;){var i,s,a,l,c=t[n],u=null,f=c>239?4:c>223?3:c>191?2:1;if(n+f<=r)switch(f){case 1:c<128&&(u=c);break;case 2:128==(192&(i=t[n+1]))&&(l=(31&c)<<6|63&i)>127&&(u=l);break;case 3:i=t[n+1],s=t[n+2],128==(192&i)&&128==(192&s)&&(l=(15&c)<<12|(63&i)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:i=t[n+1],s=t[n+2],a=t[n+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,f=1):u>65535&&(u-=65536,o.push(u>>>10&1023|55296),u=56320|1023&u),o.push(u),n+=f}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);var r="",o=0;for(;o<e;)r+=String.fromCharCode.apply(String,t.slice(o,o+=E));return r}(o)}e.Buffer=l,e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==r.g.TYPED_ARRAY_SUPPORT?r.g.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,r){return c(null,t,e,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,r){return function(t,e,r,o){return u(e),e<=0?a(t,e):void 0!==r?"string"==typeof o?a(t,e).fill(r,o):a(t,e).fill(r):a(t,e)}(null,t,e,r)},l.allocUnsafe=function(t){return f(null,t)},l.allocUnsafeSlow=function(t){return f(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,o=e.length,n=0,i=Math.min(r,o);n<i;++n)if(t[n]!==e[n]){r=t[n],o=e[n];break}return r<o?-1:o<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var o=l.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){var s=t[r];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,n),n+=s.length}return o},l.byteLength=h,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):m.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,r,o,n){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===o&&(o=0),void 0===n&&(n=this.length),e<0||r>t.length||o<0||n>this.length)throw new RangeError("out of range index");if(o>=n&&e>=r)return 0;if(o>=n)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(n>>>=0)-(o>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(i,s),c=this.slice(o,n),u=t.slice(e,r),f=0;f<a;++f)if(c[f]!==u[f]){i=c[f],s=u[f];break}return i<s?-1:s<i?1:0},l.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},l.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},l.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},l.prototype.write=function(t,e,r,o){if(void 0===e)o="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)o=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===o&&(o="utf8")):(o=r,r=void 0)}var n=this.length-e;if((void 0===r||r>n)&&(r=n),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return C(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function T(t,e,r){var o="";r=Math.min(t.length,r);for(var n=e;n<r;++n)o+=String.fromCharCode(127&t[n]);return o}function x(t,e,r){var o="";r=Math.min(t.length,r);for(var n=e;n<r;++n)o+=String.fromCharCode(t[n]);return o}function P(t,e,r){var o=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>o)&&(r=o);for(var n="",i=e;i<r;++i)n+=M(t[i]);return n}function A(t,e,r){for(var o=t.slice(e,r),n="",i=0;i<o.length;i+=2)n+=String.fromCharCode(o[i]+256*o[i+1]);return n}function $(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,r,o,n,i){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<i)throw new RangeError('"value" argument is out of bounds');if(r+o>t.length)throw new RangeError("Index out of range")}function I(t,e,r,o){e<0&&(e=65535+e+1);for(var n=0,i=Math.min(t.length-r,2);n<i;++n)t[r+n]=(e&255<<8*(o?n:1-n))>>>8*(o?n:1-n)}function R(t,e,r,o){e<0&&(e=4294967295+e+1);for(var n=0,i=Math.min(t.length-r,4);n<i;++n)t[r+n]=e>>>8*(o?n:3-n)&255}function L(t,e,r,o,n,i){if(r+o>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,o,i){return i||L(t,0,r,4),n.write(t,e,r,o,23,4),r+4}function F(t,e,r,o,i){return i||L(t,0,r,8),n.write(t,e,r,o,52,8),r+8}l.prototype.slice=function(t,e){var r,o=this.length;if((t=~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),(e=void 0===e?o:~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=l.prototype;else{var n=e-t;r=new l(n,void 0);for(var i=0;i<n;++i)r[i]=this[i+t]}return r},l.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||$(t,e,this.length);for(var o=this[t],n=1,i=0;++i<e&&(n*=256);)o+=this[t+i]*n;return o},l.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||$(t,e,this.length);for(var o=this[t+--e],n=1;e>0&&(n*=256);)o+=this[t+--e]*n;return o},l.prototype.readUInt8=function(t,e){return e||$(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||$(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||$(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||$(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||$(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||$(t,e,this.length);for(var o=this[t],n=1,i=0;++i<e&&(n*=256);)o+=this[t+i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||$(t,e,this.length);for(var o=e,n=1,i=this[t+--o];o>0&&(n*=256);)i+=this[t+--o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readInt8=function(t,e){return e||$(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||$(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,e){e||$(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,e){return e||$(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||$(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||$(t,4,this.length),n.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||$(t,4,this.length),n.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||$(t,8,this.length),n.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||$(t,8,this.length),n.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,r,o){(t=+t,e|=0,r|=0,o)||j(this,t,e,r,Math.pow(2,8*r)-1,0);var n=1,i=0;for(this[e]=255&t;++i<r&&(n*=256);)this[e+i]=t/n&255;return e+r},l.prototype.writeUIntBE=function(t,e,r,o){(t=+t,e|=0,r|=0,o)||j(this,t,e,r,Math.pow(2,8*r)-1,0);var n=r-1,i=1;for(this[e+n]=255&t;--n>=0&&(i*=256);)this[e+n]=t/i&255;return e+r},l.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,r,o){if(t=+t,e|=0,!o){var n=Math.pow(2,8*r-1);j(this,t,e,r,n-1,-n)}var i=0,s=1,a=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},l.prototype.writeIntBE=function(t,e,r,o){if(t=+t,e|=0,!o){var n=Math.pow(2,8*r-1);j(this,t,e,r,n-1,-n)}var i=r-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},l.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},l.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},l.prototype.writeDoubleLE=function(t,e,r){return F(this,t,e,!0,r)},l.prototype.writeDoubleBE=function(t,e,r){return F(this,t,e,!1,r)},l.prototype.copy=function(t,e,r,o){if(r||(r=0),o||0===o||(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&o<r&&(o=r),o===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-e<o-r&&(o=t.length-e+r);var n,i=o-r;if(this===t&&r<e&&e<o)for(n=i-1;n>=0;--n)t[n+e]=this[n+r];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<i;++n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},l.prototype.fill=function(t,e,r,o){if("string"==typeof t){if("string"==typeof e?(o=e,e=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!l.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var s=l.isBuffer(t)?t:B(new l(t,o).toString()),a=s.length;for(i=0;i<r-e;++i)this[i+e]=s[i%a]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var r;e=e||1/0;for(var o=t.length,n=null,i=[],s=0;s<o;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===o){(e-=3)>-1&&i.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(e-=3)>-1&&i.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function V(t){return o.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,r,o){for(var n=0;n<o&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}},80645:function(t,e){e.read=function(t,e,r,o,n){var i,s,a=8*n-o-1,l=(1<<a)-1,c=l>>1,u=-7,f=r?n-1:0,d=r?-1:1,p=t[e+f];for(f+=d,i=p&(1<<-u)-1,p>>=-u,u+=a;u>0;i=256*i+t[e+f],f+=d,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=o;u>0;s=256*s+t[e+f],f+=d,u-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,o),i-=c}return(p?-1:1)*s*Math.pow(2,i-o)},e.write=function(t,e,r,o,n,i){var s,a,l,c=8*i-n-1,u=(1<<c)-1,f=u>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=o?0:i-1,h=o?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+f>=1?d/l:d*Math.pow(2,1-f))*l>=2&&(s++,l/=2),s+f>=u?(a=0,s=u):s+f>=1?(a=(e*l-1)*Math.pow(2,n),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,n),s=0));n>=8;t[r+p]=255&a,p+=h,a/=256,n-=8);for(s=s<<n|a,c+=n;c>0;t[r+p]=255&s,p+=h,s/=256,c-=8);t[r+p-h]|=128*m}},5826:function(t){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,r),i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){"use strict";var t=Vue,e=!0;t.util.warn;let o;const n=t=>o=t,i=Symbol();function s(t){return t&&"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)&&"function"!=typeof t.toJSON}var a;!function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"}(a||(a={}));const l="undefined"!=typeof window,c="undefined"!=typeof __VUE_PROD_DEVTOOLS__&&__VUE_PROD_DEVTOOLS__&&l,u=(()=>"object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:"object"==typeof globalThis?globalThis:{HTMLElement:null})();function f(t,e,r){const o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){v(o.response,e,r)},o.onerror=function(){console.error("could not download file")},o.send()}function d(t){const e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function p(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}const h="object"==typeof navigator?navigator:{userAgent:""},m=(()=>/Macintosh/.test(h.userAgent)&&/AppleWebKit/.test(h.userAgent)&&!/Safari/.test(h.userAgent))(),v=l?"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype&&!m?function(t,e="download",r){const o=document.createElement("a");o.download=e,o.rel="noopener","string"==typeof t?(o.href=t,o.origin!==location.origin?d(o.href)?f(t,e,r):(o.target="_blank",p(o)):p(o)):(o.href=URL.createObjectURL(t),setTimeout((function(){URL.revokeObjectURL(o.href)}),4e4),setTimeout((function(){p(o)}),0))}:"msSaveOrOpenBlob"in h?function(t,e="download",r){if("string"==typeof t)if(d(t))f(t,e,r);else{const e=document.createElement("a");e.href=t,e.target="_blank",setTimeout((function(){p(e)}))}else navigator.msSaveOrOpenBlob(function(t,{autoBom:e=!1}={}){return e&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,r),e)}:function(t,e,r,o){(o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading...");if("string"==typeof t)return f(t,e,r);const n="application/octet-stream"===t.type,i=/constructor/i.test(String(u.HTMLElement))||"safari"in u,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||n&&i||m)&&"undefined"!=typeof FileReader){const e=new FileReader;e.onloadend=function(){let t=e.result;if("string"!=typeof t)throw o=null,new Error("Wrong reader.result type");t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location.assign(t),o=null},e.readAsDataURL(t)}else{const e=URL.createObjectURL(t);o?o.location.assign(e):location.href=e,o=null,setTimeout((function(){URL.revokeObjectURL(e)}),4e4)}}:()=>{};const{assign:y}=Object;const g=()=>{};function b(e,r,o,n=g){e.push(r);const i=()=>{const t=e.indexOf(r);t>-1&&(e.splice(t,1),n())};return!o&&(0,t.getCurrentScope)()&&(0,t.onScopeDispose)(i),i}function w(t,...e){t.slice().forEach((t=>{t(...e)}))}const C=t=>t();function S(e,r){e instanceof Map&&r instanceof Map&&r.forEach(((t,r)=>e.set(r,t))),e instanceof Set&&r instanceof Set&&r.forEach(e.add,e);for(const o in r){if(!r.hasOwnProperty(o))continue;const n=r[o],i=e[o];s(i)&&s(n)&&e.hasOwnProperty(o)&&!(0,t.isRef)(n)&&!(0,t.isReactive)(n)?e[o]=S(i,n):e[o]=n}return e}const D=Symbol(),O=new WeakMap;const{assign:k}=Object;function E(r,o,i={},l,u,f){let d;const p=k({actions:{}},i);const h={deep:!0};let m,v;let y,_=[],E=[];const T=l.state.value[r];f||T||(e?(0,t.set)(l.state.value,r,{}):l.state.value[r]={});const x=(0,t.ref)({});let P;function A(e){let o;m=v=!1,"function"==typeof e?(e(l.state.value[r]),o={type:a.patchFunction,storeId:r,events:y}):(S(l.state.value[r],e),o={type:a.patchObject,payload:e,storeId:r,events:y});const n=P=Symbol();(0,t.nextTick)().then((()=>{P===n&&(m=!0)})),v=!0,w(_,o,l.state.value[r])}const $=f?function(){const{state:t}=i,e=t?t():{};this.$patch((t=>{k(t,e)}))}:g;function j(t,e){return function(){n(l);const o=Array.from(arguments),i=[],s=[];let a;w(E,{args:o,name:t,store:L,after:function(t){i.push(t)},onError:function(t){s.push(t)}});try{a=e.apply(this&&this.$id===r?this:L,o)}catch(t){throw w(s,t),t}return a instanceof Promise?a.then((t=>(w(i,t),t))).catch((t=>(w(s,t),Promise.reject(t)))):(w(i,a),a)}}const I=(0,t.markRaw)({actions:{},getters:{},state:[],hotState:x}),R={_p:l,$id:r,$onAction:b.bind(null,E),$patch:A,$reset:$,$subscribe(e,o={}){const n=b(_,e,o.detached,(()=>i())),i=d.run((()=>(0,t.watch)((()=>l.state.value[r]),(t=>{("sync"===o.flush?v:m)&&e({storeId:r,type:a.direct,events:y},t)}),k({},h,o))));return n},$dispose:function(){d.stop(),_=[],E=[],l._s.delete(r)}};e&&(R._r=!1);const L=(0,t.reactive)(c?k({_hmrPayload:I,_customProperties:(0,t.markRaw)(new Set)},R):R);l._s.set(r,L);const U=(l._a&&l._a.runWithContext||C)((()=>l._e.run((()=>(d=(0,t.effectScope)()).run(o)))));for(const o in U){const n=U[o];if((0,t.isRef)(n)&&(N=n,!(0,t.isRef)(N)||!N.effect)||(0,t.isReactive)(n))f||(!T||(F=n,e?O.has(F):s(F)&&F.hasOwnProperty(D))||((0,t.isRef)(n)?n.value=T[o]:S(n,T[o])),e?(0,t.set)(l.state.value[r],o,n):l.state.value[r][o]=n);else if("function"==typeof n){const r=j(o,n);e?(0,t.set)(U,o,r):U[o]=r,p.actions[o]=n}else 0}var F,N;if(e?Object.keys(U).forEach((e=>{(0,t.set)(L,e,U[e])})):(k(L,U),k((0,t.toRaw)(L),U)),Object.defineProperty(L,"$state",{get:()=>l.state.value[r],set:t=>{A((e=>{k(e,t)}))}}),c){const t={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach((e=>{Object.defineProperty(L,e,k({value:L[e]},t))}))}return e&&(L._r=!0),l._p.forEach((t=>{if(c){const e=d.run((()=>t({store:L,app:l._a,pinia:l,options:p})));Object.keys(e||{}).forEach((t=>L._customProperties.add(t))),k(L,e)}else k(L,d.run((()=>t({store:L,app:l._a,pinia:l,options:p}))))})),T&&f&&i.hydrate&&i.hydrate(L.$state,T),m=!0,v=!0,L}let T="Store";function x(...t){return t.reduce(((t,e)=>(t[e.$id+T]=function(){return e(this.$pinia)},t)),{})}function P(t,e){return Array.isArray(e)?e.reduce(((e,r)=>(e[r]=function(){return t(this.$pinia)[r]},e)),{}):Object.keys(e).reduce(((r,o)=>(r[o]=function(){const r=t(this.$pinia),n=e[o];return"function"==typeof n?n.call(this,r):r[n]},r)),{})}function A(t,e){return Array.isArray(e)?e.reduce(((e,r)=>(e[r]=function(...e){return t(this.$pinia)[r](...e)},e)),{}):Object.keys(e).reduce(((r,o)=>(r[o]=function(...r){return t(this.$pinia)[e[o]](...r)},r)),{})}function j(t,e){return function(){return t.apply(e,arguments)}}const{toString:I}=Object.prototype,{getPrototypeOf:R}=Object,L=(U=Object.create(null),t=>{const e=I.call(t);return U[e]||(U[e]=e.slice(8,-1).toLowerCase())});var U;const F=t=>(t=t.toLowerCase(),e=>L(e)===t),N=t=>e=>typeof e===t,{isArray:M}=Array,B=N("undefined");const V=F("ArrayBuffer");const H=N("string"),q=N("function"),W=N("number"),G=t=>null!==t&&"object"==typeof t,z=t=>{if("object"!==L(t))return!1;const e=R(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},Y=F("Date"),K=F("File"),J=F("Blob"),X=F("FileList"),Q=F("URLSearchParams");function Z(t,e,{allOwnKeys:r=!1}={}){if(null==t)return;let o,n;if("object"!=typeof t&&(t=[t]),M(t))for(o=0,n=t.length;o<n;o++)e.call(null,t[o],o,t);else{const n=r?Object.getOwnPropertyNames(t):Object.keys(t),i=n.length;let s;for(o=0;o<i;o++)s=n[o],e.call(null,t[s],s,t)}}function tt(t,e){e=e.toLowerCase();const r=Object.keys(t);let o,n=r.length;for(;n-- >0;)if(o=r[n],e===o.toLowerCase())return o;return null}const et="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,rt=t=>!B(t)&&t!==et;const ot=(nt="undefined"!=typeof Uint8Array&&R(Uint8Array),t=>nt&&t instanceof nt);var nt;const it=F("HTMLFormElement"),st=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),at=F("RegExp"),lt=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),o={};Z(r,((r,n)=>{let i;!1!==(i=e(r,n,t))&&(o[n]=i||r)})),Object.defineProperties(t,o)},ct="abcdefghijklmnopqrstuvwxyz",ut="0123456789",ft={DIGIT:ut,ALPHA:ct,ALPHA_DIGIT:ct+ct.toUpperCase()+ut};const dt=F("AsyncFunction");var pt={isArray:M,isArrayBuffer:V,isBuffer:function(t){return null!==t&&!B(t)&&null!==t.constructor&&!B(t.constructor)&&q(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||q(t.append)&&("formdata"===(e=L(t))||"object"===e&&q(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&V(t.buffer),e},isString:H,isNumber:W,isBoolean:t=>!0===t||!1===t,isObject:G,isPlainObject:z,isUndefined:B,isDate:Y,isFile:K,isBlob:J,isRegExp:at,isFunction:q,isStream:t=>G(t)&&q(t.pipe),isURLSearchParams:Q,isTypedArray:ot,isFileList:X,forEach:Z,merge:function t(){const{caseless:e}=rt(this)&&this||{},r={},o=(o,n)=>{const i=e&&tt(r,n)||n;z(r[i])&&z(o)?r[i]=t(r[i],o):z(o)?r[i]=t({},o):M(o)?r[i]=o.slice():r[i]=o};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&Z(arguments[t],o);return r},extend:(t,e,r,{allOwnKeys:o}={})=>(Z(e,((e,o)=>{r&&q(e)?t[o]=j(e,r):t[o]=e}),{allOwnKeys:o}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,r,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject:(t,e,r,o)=>{let n,i,s;const a={};if(e=e||{},null==t)return e;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)s=n[i],o&&!o(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==r&&R(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:L,kindOfTest:F,endsWith:(t,e,r)=>{t=String(t),(void 0===r||r>t.length)&&(r=t.length),r-=e.length;const o=t.indexOf(e,r);return-1!==o&&o===r},toArray:t=>{if(!t)return null;if(M(t))return t;let e=t.length;if(!W(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},forEachEntry:(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=r.next())&&!o.done;){const r=o.value;e.call(t,r[0],r[1])}},matchAll:(t,e)=>{let r;const o=[];for(;null!==(r=t.exec(e));)o.push(r);return o},isHTMLForm:it,hasOwnProperty:st,hasOwnProp:st,reduceDescriptors:lt,freezeMethods:t=>{lt(t,((e,r)=>{if(q(t)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const o=t[r];q(o)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(t,e)=>{const r={},o=t=>{t.forEach((t=>{r[t]=!0}))};return M(t)?o(t):o(String(t).split(e)),r},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:tt,global:et,isContextDefined:rt,ALPHABET:ft,generateString:(t=16,e=ft.ALPHA_DIGIT)=>{let r="";const{length:o}=e;for(;t--;)r+=e[Math.random()*o|0];return r},isSpecCompliantForm:function(t){return!!(t&&q(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),r=(t,o)=>{if(G(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[o]=t;const n=M(t)?[]:{};return Z(t,((t,e)=>{const i=r(t,o+1);!B(i)&&(n[e]=i)})),e[o]=void 0,n}}return t};return r(t,0)},isAsyncFn:dt,isThenable:t=>t&&(G(t)||q(t))&&q(t.then)&&q(t.catch)};function ht(t,e,r,o,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),o&&(this.request=o),n&&(this.response=n)}pt.inherits(ht,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:pt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const mt=ht.prototype,vt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{vt[t]={value:t}})),Object.defineProperties(ht,vt),Object.defineProperty(mt,"isAxiosError",{value:!0}),ht.from=(t,e,r,o,n,i)=>{const s=Object.create(mt);return pt.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),ht.call(s,t.message,e,r,o,n),s.cause=t,s.name=t.name,i&&Object.assign(s,i),s};var yt=ht,gt=r(48764).Buffer;function bt(t){return pt.isPlainObject(t)||pt.isArray(t)}function _t(t){return pt.endsWith(t,"[]")?t.slice(0,-2):t}function wt(t,e,r){return t?t.concat(e).map((function(t,e){return t=_t(t),!r&&e?"["+t+"]":t})).join(r?".":""):e}const Ct=pt.toFlatObject(pt,{},null,(function(t){return/^is[A-Z]/.test(t)}));var St=function(t,e,r){if(!pt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const o=(r=pt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!pt.isUndefined(e[t])}))).metaTokens,n=r.visitor||c,i=r.dots,s=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&pt.isSpecCompliantForm(e);if(!pt.isFunction(n))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(pt.isDate(t))return t.toISOString();if(!a&&pt.isBlob(t))throw new yt("Blob is not supported. Use a Buffer instead.");return pt.isArrayBuffer(t)||pt.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):gt.from(t):t}function c(t,r,n){let a=t;if(t&&!n&&"object"==typeof t)if(pt.endsWith(r,"{}"))r=o?r:r.slice(0,-2),t=JSON.stringify(t);else if(pt.isArray(t)&&function(t){return pt.isArray(t)&&!t.some(bt)}(t)||(pt.isFileList(t)||pt.endsWith(r,"[]"))&&(a=pt.toArray(t)))return r=_t(r),a.forEach((function(t,o){!pt.isUndefined(t)&&null!==t&&e.append(!0===s?wt([r],o,i):null===s?r:r+"[]",l(t))})),!1;return!!bt(t)||(e.append(wt(n,r,i),l(t)),!1)}const u=[],f=Object.assign(Ct,{defaultVisitor:c,convertValue:l,isVisitable:bt});if(!pt.isObject(t))throw new TypeError("data must be an object");return function t(r,o){if(!pt.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+o.join("."));u.push(r),pt.forEach(r,(function(r,i){!0===(!(pt.isUndefined(r)||null===r)&&n.call(e,r,pt.isString(i)?i.trim():i,o,f))&&t(r,o?o.concat(i):[i])})),u.pop()}}(t),e};function Dt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Ot(t,e){this._pairs=[],t&&St(t,this,e)}const kt=Ot.prototype;kt.append=function(t,e){this._pairs.push([t,e])},kt.toString=function(t){const e=t?function(e){return t.call(this,e,Dt)}:Dt;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var Et=Ot;function Tt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xt(t,e,r){if(!e)return t;const o=r&&r.encode||Tt,n=r&&r.serialize;let i;if(i=n?n(e,r):pt.isURLSearchParams(e)?e.toString():new Et(e,r).toString(o),i){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}var Pt=class{constructor(){this.handlers=[]}use(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){pt.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},At={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var $t={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Et,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let t;return("undefined"==typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!=typeof window&&"undefined"!=typeof document)})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var jt=function(t){function e(t,r,o,n){let i=t[n++];const s=Number.isFinite(+i),a=n>=t.length;if(i=!i&&pt.isArray(o)?o.length:i,a)return pt.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!s;o[i]&&pt.isObject(o[i])||(o[i]=[]);return e(t,r,o[i],n)&&pt.isArray(o[i])&&(o[i]=function(t){const e={},r=Object.keys(t);let o;const n=r.length;let i;for(o=0;o<n;o++)i=r[o],e[i]=t[i];return e}(o[i])),!s}if(pt.isFormData(t)&&pt.isFunction(t.entries)){const r={};return pt.forEachEntry(t,((t,o)=>{e(function(t){return pt.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),o,r,0)})),r}return null};const It={transitional:At,adapter:["xhr","http"],transformRequest:[function(t,e){const r=e.getContentType()||"",o=r.indexOf("application/json")>-1,n=pt.isObject(t);n&&pt.isHTMLForm(t)&&(t=new FormData(t));if(pt.isFormData(t))return o&&o?JSON.stringify(jt(t)):t;if(pt.isArrayBuffer(t)||pt.isBuffer(t)||pt.isStream(t)||pt.isFile(t)||pt.isBlob(t))return t;if(pt.isArrayBufferView(t))return t.buffer;if(pt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(n){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return St(t,new $t.classes.URLSearchParams,Object.assign({visitor:function(t,e,r,o){return $t.isNode&&pt.isBuffer(t)?(this.append(e,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((i=pt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return St(i?{"files[]":t}:t,e&&new e,this.formSerializer)}}return n||o?(e.setContentType("application/json",!1),function(t,e,r){if(pt.isString(t))try{return(e||JSON.parse)(t),pt.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||It.transitional,r=e&&e.forcedJSONParsing,o="json"===this.responseType;if(t&&pt.isString(t)&&(r&&!this.responseType||o)){const r=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(t){if(r){if("SyntaxError"===t.name)throw yt.from(t,yt.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$t.classes.FormData,Blob:$t.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};pt.forEach(["delete","get","head","post","put","patch"],(t=>{It.headers[t]={}}));var Rt=It;const Lt=pt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Ut=Symbol("internals");function Ft(t){return t&&String(t).trim().toLowerCase()}function Nt(t){return!1===t||null==t?t:pt.isArray(t)?t.map(Nt):String(t)}function Mt(t,e,r,o,n){return pt.isFunction(o)?o.call(this,e,r):(n&&(e=r),pt.isString(e)?pt.isString(o)?-1!==e.indexOf(o):pt.isRegExp(o)?o.test(e):void 0:void 0)}class Bt{constructor(t){t&&this.set(t)}set(t,e,r){const o=this;function n(t,e,r){const n=Ft(e);if(!n)throw new Error("header name must be a non-empty string");const i=pt.findKey(o,n);(!i||void 0===o[i]||!0===r||void 0===r&&!1!==o[i])&&(o[i||e]=Nt(t))}const i=(t,e)=>pt.forEach(t,((t,r)=>n(t,r,e)));return pt.isPlainObject(t)||t instanceof this.constructor?i(t,e):pt.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?i((t=>{const e={};let r,o,n;return t&&t.split("\n").forEach((function(t){n=t.indexOf(":"),r=t.substring(0,n).trim().toLowerCase(),o=t.substring(n+1).trim(),!r||e[r]&&Lt[r]||("set-cookie"===r?e[r]?e[r].push(o):e[r]=[o]:e[r]=e[r]?e[r]+", "+o:o)})),e})(t),e):null!=t&&n(e,t,r),this}get(t,e){if(t=Ft(t)){const r=pt.findKey(this,t);if(r){const t=this[r];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=r.exec(t);)e[o[1]]=o[2];return e}(t);if(pt.isFunction(e))return e.call(this,t,r);if(pt.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ft(t)){const r=pt.findKey(this,t);return!(!r||void 0===this[r]||e&&!Mt(0,this[r],r,e))}return!1}delete(t,e){const r=this;let o=!1;function n(t){if(t=Ft(t)){const n=pt.findKey(r,t);!n||e&&!Mt(0,r[n],n,e)||(delete r[n],o=!0)}}return pt.isArray(t)?t.forEach(n):n(t),o}clear(t){const e=Object.keys(this);let r=e.length,o=!1;for(;r--;){const n=e[r];t&&!Mt(0,this[n],n,t,!0)||(delete this[n],o=!0)}return o}normalize(t){const e=this,r={};return pt.forEach(this,((o,n)=>{const i=pt.findKey(r,n);if(i)return e[i]=Nt(o),void delete e[n];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,r)=>e.toUpperCase()+r))}(n):String(n).trim();s!==n&&delete e[n],e[s]=Nt(o),r[s]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return pt.forEach(this,((r,o)=>{null!=r&&!1!==r&&(e[o]=t&&pt.isArray(r)?r.join(", "):r)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const r=new this(t);return e.forEach((t=>r.set(t))),r}static accessor(t){const e=(this[Ut]=this[Ut]={accessors:{}}).accessors,r=this.prototype;function o(t){const o=Ft(t);e[o]||(!function(t,e){const r=pt.toCamelCase(" "+e);["get","set","has"].forEach((o=>{Object.defineProperty(t,o+r,{value:function(t,r,n){return this[o].call(this,e,t,r,n)},configurable:!0})}))}(r,t),e[o]=!0)}return pt.isArray(t)?t.forEach(o):o(t),this}}Bt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),pt.reduceDescriptors(Bt.prototype,(({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[r]=t}}})),pt.freezeMethods(Bt);var Vt=Bt;function Ht(t,e){const r=this||Rt,o=e||r,n=Vt.from(o.headers);let i=o.data;return pt.forEach(t,(function(t){i=t.call(r,i,n.normalize(),e?e.status:void 0)})),n.normalize(),i}function qt(t){return!(!t||!t.__CANCEL__)}function Wt(t,e,r){yt.call(this,null==t?"canceled":t,yt.ERR_CANCELED,e,r),this.name="CanceledError"}pt.inherits(Wt,yt,{__CANCEL__:!0});var Gt=Wt;var zt=$t.isStandardBrowserEnv?{write:function(t,e,r,o,n,i){const s=[];s.push(t+"="+encodeURIComponent(e)),pt.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),pt.isString(o)&&s.push("path="+o),pt.isString(n)&&s.push("domain="+n),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Yt(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}var Kt=$t.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let r;function o(r){let o=r;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return r=o(window.location.href),function(t){const e=pt.isString(t)?o(t):t;return e.protocol===r.protocol&&e.host===r.host}}():function(){return!0};var Jt=function(t,e){t=t||10;const r=new Array(t),o=new Array(t);let n,i=0,s=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),c=o[s];n||(n=l),r[i]=a,o[i]=l;let u=s,f=0;for(;u!==i;)f+=r[u++],u%=t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),l-n<e)return;const d=c&&l-c;return d?Math.round(1e3*f/d):void 0}};function Xt(t,e){let r=0;const o=Jt(50,250);return n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,a=i-r,l=o(a);r=i;const c={loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&i<=s?(s-i)/l:void 0,event:n};c[e?"download":"upload"]=!0,t(c)}}const Qt={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,r){let o=t.data;const n=Vt.from(t.headers).normalize(),i=t.responseType;let s,a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}pt.isFormData(o)&&($t.isStandardBrowserEnv||$t.isStandardBrowserWebWorkerEnv?n.setContentType(!1):n.getContentType(/^\s*multipart\/form-data/)?pt.isString(a=n.getContentType())&&n.setContentType(a.replace(/^\s*(multipart\/form-data);+/,"$1")):n.setContentType("multipart/form-data"));let c=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",r=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";n.set("Authorization","Basic "+btoa(e+":"+r))}const u=Yt(t.baseURL,t.url);function f(){if(!c)return;const o=Vt.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(t,e,r){const o=r.config.validateStatus;r.status&&o&&!o(r.status)?e(new yt("Request failed with status code "+r.status,[yt.ERR_BAD_REQUEST,yt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}((function(t){e(t),l()}),(function(t){r(t),l()}),{data:i&&"text"!==i&&"json"!==i?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:o,config:t,request:c}),c=null}if(c.open(t.method.toUpperCase(),xt(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,"onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(f)},c.onabort=function(){c&&(r(new yt("Request aborted",yt.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new yt("Network Error",yt.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const o=t.transitional||At;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(new yt(e,o.clarifyTimeoutError?yt.ETIMEDOUT:yt.ECONNABORTED,t,c)),c=null},$t.isStandardBrowserEnv){const e=(t.withCredentials||Kt(u))&&t.xsrfCookieName&&zt.read(t.xsrfCookieName);e&&n.set(t.xsrfHeaderName,e)}void 0===o&&n.setContentType(null),"setRequestHeader"in c&&pt.forEach(n.toJSON(),(function(t,e){c.setRequestHeader(e,t)})),pt.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),i&&"json"!==i&&(c.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&c.addEventListener("progress",Xt(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Xt(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=e=>{c&&(r(!e||e.type?new Gt(null,t,c):e),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const d=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(u);d&&-1===$t.protocols.indexOf(d)?r(new yt("Unsupported protocol "+d+":",yt.ERR_BAD_REQUEST,t)):c.send(o||null)}))}};pt.forEach(Qt,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));const Zt=t=>`- ${t}`,te=t=>pt.isFunction(t)||null===t||!1===t;var ee=t=>{t=pt.isArray(t)?t:[t];const{length:e}=t;let r,o;const n={};for(let i=0;i<e;i++){let e;if(r=t[i],o=r,!te(r)&&(o=Qt[(e=String(r)).toLowerCase()],void 0===o))throw new yt(`Unknown adapter '${e}'`);if(o)break;n[e||"#"+i]=o}if(!o){const t=Object.entries(n).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));let r=e?t.length>1?"since :\n"+t.map(Zt).join("\n"):" "+Zt(t[0]):"as no adapter specified";throw new yt("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return o};function re(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gt(null,t)}function oe(t){re(t),t.headers=Vt.from(t.headers),t.data=Ht.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return ee(t.adapter||Rt.adapter)(t).then((function(e){return re(t),e.data=Ht.call(t,t.transformResponse,e),e.headers=Vt.from(e.headers),e}),(function(e){return qt(e)||(re(t),e&&e.response&&(e.response.data=Ht.call(t,t.transformResponse,e.response),e.response.headers=Vt.from(e.response.headers))),Promise.reject(e)}))}const ne=t=>t instanceof Vt?t.toJSON():t;function ie(t,e){e=e||{};const r={};function o(t,e,r){return pt.isPlainObject(t)&&pt.isPlainObject(e)?pt.merge.call({caseless:r},t,e):pt.isPlainObject(e)?pt.merge({},e):pt.isArray(e)?e.slice():e}function n(t,e,r){return pt.isUndefined(e)?pt.isUndefined(t)?void 0:o(void 0,t,r):o(t,e,r)}function i(t,e){if(!pt.isUndefined(e))return o(void 0,e)}function s(t,e){return pt.isUndefined(e)?pt.isUndefined(t)?void 0:o(void 0,t):o(void 0,e)}function a(r,n,i){return i in e?o(r,n):i in t?o(void 0,r):void 0}const l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e)=>n(ne(t),ne(e),!0)};return pt.forEach(Object.keys(Object.assign({},t,e)),(function(o){const i=l[o]||n,s=i(t[o],e[o],o);pt.isUndefined(s)&&i!==a||(r[o]=s)})),r}const se="1.5.1",ae={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{ae[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));const le={};ae.transitional=function(t,e,r){function o(t,e){return"[Axios v1.5.1] Transitional option '"+t+"'"+e+(r?". "+r:"")}return(r,n,i)=>{if(!1===t)throw new yt(o(n," has been removed"+(e?" in "+e:"")),yt.ERR_DEPRECATED);return e&&!le[n]&&(le[n]=!0,console.warn(o(n," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,n,i)}};var ce={assertOptions:function(t,e,r){if("object"!=typeof t)throw new yt("options must be an object",yt.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let n=o.length;for(;n-- >0;){const i=o[n],s=e[i];if(s){const e=t[i],r=void 0===e||s(e,i,t);if(!0!==r)throw new yt("option "+i+" must be "+r,yt.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new yt("Unknown option "+i,yt.ERR_BAD_OPTION)}},validators:ae};const ue=ce.validators;class fe{constructor(t){this.defaults=t,this.interceptors={request:new Pt,response:new Pt}}request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=ie(this.defaults,e);const{transitional:r,paramsSerializer:o,headers:n}=e;void 0!==r&&ce.assertOptions(r,{silentJSONParsing:ue.transitional(ue.boolean),forcedJSONParsing:ue.transitional(ue.boolean),clarifyTimeoutError:ue.transitional(ue.boolean)},!1),null!=o&&(pt.isFunction(o)?e.paramsSerializer={serialize:o}:ce.assertOptions(o,{encode:ue.function,serialize:ue.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let i=n&&pt.merge(n.common,n[e.method]);n&&pt.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete n[t]})),e.headers=Vt.concat(i,n);const s=[];let a=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let u,f=0;if(!a){const t=[oe.bind(this),void 0];for(t.unshift.apply(t,s),t.push.apply(t,l),u=t.length,c=Promise.resolve(e);f<u;)c=c.then(t[f++],t[f++]);return c}u=s.length;let d=e;for(f=0;f<u;){const t=s[f++],e=s[f++];try{d=t(d)}catch(t){e.call(this,t);break}}try{c=oe.call(this,d)}catch(t){return Promise.reject(t)}for(f=0,u=l.length;f<u;)c=c.then(l[f++],l[f++]);return c}getUri(t){return xt(Yt((t=ie(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}pt.forEach(["delete","get","head","options"],(function(t){fe.prototype[t]=function(e,r){return this.request(ie(r||{},{method:t,url:e,data:(r||{}).data}))}})),pt.forEach(["post","put","patch"],(function(t){function e(e){return function(r,o,n){return this.request(ie(n||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}fe.prototype[t]=e(),fe.prototype[t+"Form"]=e(!0)}));var de=fe;class pe{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const r=this;this.promise.then((t=>{if(!r._listeners)return;let e=r._listeners.length;for(;e-- >0;)r._listeners[e](t);r._listeners=null})),this.promise.then=t=>{let e;const o=new Promise((t=>{r.subscribe(t),e=t})).then(t);return o.cancel=function(){r.unsubscribe(e)},o},t((function(t,o,n){r.reason||(r.reason=new Gt(t,o,n),e(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new pe((function(e){t=e})),cancel:t}}}var he=pe;const me={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(me).forEach((([t,e])=>{me[e]=t}));var ve=me;const ye=function t(e){const r=new de(e),o=j(de.prototype.request,r);return pt.extend(o,de.prototype,r,{allOwnKeys:!0}),pt.extend(o,r,null,{allOwnKeys:!0}),o.create=function(r){return t(ie(e,r))},o}(Rt);ye.Axios=de,ye.CanceledError=Gt,ye.CancelToken=he,ye.isCancel=qt,ye.VERSION=se,ye.toFormData=St,ye.AxiosError=yt,ye.Cancel=ye.CanceledError,ye.all=function(t){return Promise.all(t)},ye.spread=function(t){return function(e){return t.apply(null,e)}},ye.isAxiosError=function(t){return pt.isObject(t)&&!0===t.isAxiosError},ye.mergeConfig=ie,ye.AxiosHeaders=Vt,ye.formToJSON=t=>jt(pt.isHTMLForm(t)?new FormData(t):t),ye.getAdapter=ee,ye.HttpStatusCode=ve,ye.default=ye;var ge=ye;const be=function(r,s,a){let l,c;const u="function"==typeof s;function f(r,a){const f=!!(0,t.getCurrentInstance)();(r=r||(f?(0,t.inject)(i,null):null))&&n(r),(r=o)._s.has(l)||(u?E(l,s,c,r):function(r,o,i,s){const{state:a,actions:l,getters:c}=o,u=i.state.value[r];let f;f=E(r,(function(){u||(e?(0,t.set)(i.state.value,r,a?a():{}):i.state.value[r]=a?a():{});const o=(0,t.toRefs)(i.state.value[r]);return k(o,l,Object.keys(c||{}).reduce(((o,s)=>(o[s]=(0,t.markRaw)((0,t.computed)((()=>{n(i);const t=i._s.get(r);if(!e||t._r)return c[s].call(t,t)}))),o)),{}))}),o,i,0,!0)}(l,c,r));return r._s.get(l)}return"string"==typeof r?(l=r,c=u?a:s):(c=r,l=r.id),f.$id=l,f}({id:"HiveGatherData",state:()=>({id:"",blockMeta:{"b-id":0,"ft-id":0},blockUrls:{stories:"",comments:""},blockConfig:{},blockUi:{search:"",sortKey:"",sortText:"",filterCategory:"",filterCategoryText:"",filterStatus:"",filterStatusText:"",filterType:"",filterTypeText:"",loadingData:!1},blockData:{userAttr:{},commentsUserAttr:{},userAttrFields:{}},stories:[],pagination:{currentPage:1,hasNext:!1},limit:12,totalSubmissions:0,user:{isLoggedIn:!1,userName:null,userEmail:null,attributes:{}}}),getters:{hasFilters(){return()=>""!==this.blockUi.filterType||""!==this.blockUi.filterStatus||""!==this.blockUi.filterCategory},filtersCount(){return()=>[this.blockUi.filterCategory,this.blockUi.filterStatus,this.blockUi.filterType].filter(Boolean).length},canUserPost(){return!this.blockConfig.requiresRegistration||this.user.isLoggedIn}},actions:{resetFilters(t){this.blockUi.filterCategory=this.blockUi.filterStatus=this.blockUi.filterType=this.blockUi.search="",this.blockUi.filterCategoryText=this.blockUi.filterStatusText=this.blockUi.filterTypeText="",t&&document.querySelector("#filters-"+this.blockMeta["b-id"]+" select").focus()},resetSort(){this.blockUi.sortKey="",this.blockUi.sortText=""},resetFiltersAndSort(){this.resetFilters(),this.resetSort()},filterByCategory(t,e){this.blockUi.filterCategory=t,this.blockUi.filterCategoryText=e},filterByType(t,e){this.blockUi.filterType=t,this.blockUi.filterTypeText=e},filterByFeatured(t,e){this.blockUi.filterStatus=t,this.blockUi.filterStatusText=e},sortBy(t){this.blockUi.sortKey=t},incrementTotalSubmissions(){this.totalSubmissions++},fetchData(t){var e=this.blockUrls.stories+"/stories",r={};if(t&&parseInt(t)>0&&(r.page=t),this.limit&&parseInt(this.limit)>0&&(r.limit=this.limit),this.blockUi.filterCategory&&(r.category=this.blockUi.filterCategory),this.blockUi.filterStatus&&(r.featuredLabel=this.blockUi.filterStatus),this.blockUi.filterType&&(r.type=this.blockUi.filterType),this.blockUi.search&&(r.s=this.blockUi.search),this.blockUi.sortKey){var o=this.blockUi.sortKey.split(":");r.sort=o[0],r.sortDir=o[1]}return this.blockConfig.featuredOnly&&(r.status="featured"),Object.keys(r).length&&(e+="?"+$.param(r)),this.blockUi.loadingData=!0,ge.get(e,{headers:{"X-Locale":window.CCM_ACTIVE_LOCALE||"en_US"}}).then((t=>{if(t.data){for(var e=0;e<t.data.stories.length;e++)this.stories.push(t.data.stories[e]);this.pagination.currentPage=t.data.pagination.currentPage,this.pagination.hasNext=t.data.pagination.hasNext}})).catch((t=>{let e;if(t.response)try{e=JSON.parse(t.response.data).message}catch(t){}throw new Error(e)})).finally((()=>{this.blockUi.loadingData=!1}))},updateFeaturedStory(t,e,r){const o=this.stories.find((e=>e.submissionID==t));o&&(o.featured=e,o.featuredLabel=r)},updateStoryCommentsCount(t,e){const r=this.stories.find((e=>e.submissionID==t));r&&(r.comments.count=e)},updateStoryUpVotesCount(t,e){const r=this.stories.find((e=>e.submissionID==t));r&&(r.votes.up=e)},flagStory(t,e){const r=new URLSearchParams;e&&r.append("labelID",e);const o=this.blockConfig.baseUrl+"/stories/"+t+"/flag";return ge.post(o,r,{headers:{"X-Locale":window.CCM_ACTIVE_LOCALE||"en_US"}}).then((e=>{if(e.data)return this.updateFeaturedStory(t,e.data.message.featured,e.data.message.featuredLabel),e.data.message.featured})).catch((t=>{t.response}))},updatePaginationLimit(t){const e=this.limit;t!==e&&(this.limit=t,e>t&&e%t==0?this.pagination.currentPage*=e/t:t>e&&!1===this.pagination.hasNext||(this.stories=[],this.fetchData()))}}});function _e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function we(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(r),!0).forEach((function(e){Ce(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ce(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Se(t,e,r,o,n,i,s,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=r,c._compiled=!0),o&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=l):n&&(l=a?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,l):[l]}return{exports:t,options:c}}var De=Se({name:"CallToAction",props:{isActive:{type:Boolean,default:!0},title:{type:String},displayTitle:{type:Boolean,default:!0,required:!0},description:{type:String},displayDescription:{type:Boolean,default:!0,required:!0},buttonLabel:{type:String},totalSubmissions:{type:Number},submissionCounter:{type:String,default:"{TOTAL}"},displaySubmissionCounter:{type:Boolean,default:!0,required:!0}},computed:we(we({},P(be,{bID:t=>t.blockMeta["b-id"],canUserPost:t=>t.canUserPost})),{},{counter(){return this.submissionCounter.replace("{TOTAL}","<var>"+this.totalSubmissions+"</var>")}}),methods:{onButtonClick:function(t){this.originalTriggerEl=t.target,this.canUserPost?this._showStoryFormModal():this._showSignModal()},_showSignModal:function(){var t=this,e=$("#signUpModal");if(!e.hasClass("in")){var r=$("<div/>",{class:"alert alert-info",role:"alert"}).html(this.$t("loginRequired"));e.find(".modal-title").before(r),e.one("hidden.bs.modal",(function(){e.find(".alert").remove(),t.originalTriggerEl&&t.originalTriggerEl.focus()})),e.modal("show"),$(window).on("signedin.hive",(function(){setTimeout((function(){$("#userDetailsModal").hasClass("in")?$("#userDetailsModal").on("hidden.bs.modal",(function(){setTimeout(t._handleModalSwitchBack,100)})):t._handleModalSwitchBack()}),100)}))}},_showStoryFormModal:function(){var t=this,e=$("#storyFormModal-"+t.bID);e.one("shown.bs.modal",(function(){$("#storyFormTitle-"+t.bID).focus()})),e.modal("show")},_handleModalSwitchBack:function(){var t=this,e=$(".modal.in");e.length?e.one("hidden.bs.modal",(function(){t._showStoryFormModal()})):t._showStoryFormModal()}},data:function(){return{originalTriggerEl:null}}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"hive-stories-cta ljs"},[t.displayTitle?e("h1",{staticClass:"activity-title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),t.displayDescription?e("p",{staticClass:"lead"},[t._v("\n        "+t._s(t.description)+"\n    ")]):t._e(),t._v(" "),t.isActive?[e("button",{staticClass:"btn btn-default btn-inverse btn-add-submission",attrs:{type:"button"},on:{click:function(e){return t.onButtonClick(e)}}},[t._v("\n            "+t._s(t.buttonLabel)+"\n        ")])]:t._e(),t._v(" "),t.displaySubmissionCounter?e("span",{staticClass:"submissions-counter",domProps:{innerHTML:t._s(t.counter)}}):t._e()],2)}),[],!1,null,null,null).exports,Oe=Se({name:"FeaturedFlag",props:{label:{type:String,default:"Featured"},colour:{type:String,default:null}},computed:{textColour:function(){var t,e,r,o=this.colour;if(/rgb\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)/g.test(o)){var n=o.match(/\d+/g);t=parseInt(n[0]),e=parseInt(n[1]),r=parseInt(n[2])}else{if(0===o.indexOf("#")&&(o=o.slice(1)),3===o.length&&(o=o[0]+o[0]+o[1]+o[1]+o[2]+o[2]),6!==o.length)return null;t=parseInt(o.slice(0,2),16),e=parseInt(o.slice(2,4),16),r=parseInt(o.slice(4,6),16)}if(void 0===t||void 0===e||void 0===r)return null;for(var i=[t/255,e/255,r/255],s=0;s<i.length;s++)i[s]<=.03928?i[s]=i[s]/12.92:i[s]=Math.pow(i[s]+.055,2.4);return.2126*i[0]+.72152*i[1]+.0722*i[2]>.358?"#000000":"#FFFFFF"}}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"story-featured-flag",style:{backgroundColor:t.colour,color:t.colour}},[e("span",{class:{ljs:t.label},style:{color:t.textColour}},[t._v(t._s(t.label||t.$t("featured")))])])}),[],!1,null,null,null).exports;function ke(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function Ee(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(r),!0).forEach((function(e){Te(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Te(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xe=Se({name:"StoryCard",components:{FeaturedFlag:Oe},props:{story:{type:Object},length:{type:Number,default:50},canFlag:{type:Boolean,default:!1},displayVoting:{type:Boolean},enableCommenting:{type:Boolean}},filters:{formatDate:function(t){return moment(t).format("LLL")},formatDateRelative:function(t){return moment(t).fromNow()},formatDateISO:function(t){return moment(t).format()},truncate:function(t,e){if(void 0!==typeof t&&null!==t){if(t.length<=e)return t;for(var r=t.slice(0,e),o=r.length-1;o>0&&" "!==r[o]&&"."!==r[o];)o-=1;return o=o||e,(r=r.slice(0,o))+"&hellip;"}}},mounted:function(){this.$parent.$emit("vuemasonry.itemAdded",{element:this.$el});var t=this;imagesLoaded(this.$el,(function(){t.$parent.$emit("vuemasonry.imageLoaded",{element:t.$el})})),$(this.$el).find('[data-toggle="dropdown"]').dropdown()},beforeDestroy:function(){this.$parent.$emit("vuemasonry.itemRemoved",{element:this.$el})},watch:{"story.featured":function(){var t=this;Vue.nextTick((function(){t.$parent.$emit("vuemasonry.imageLoaded",{element:t.$el})}))}},methods:Ee(Ee({},A(be,{flagStoryInStore:"flagStory"})),{},{flagStory:function(t,e){var r=this;this.canEdit?this.flagStoryInStore(t.submissionID,e).then((t=>{HiveAlerts.success({title:t?r.$t("markAsFeatured"):r.$t("unmarkAsFeatured"),message:r.$t("storyFlagChanged")})})):HiveAlerts.error({title:this.$t("accessDenied"),message:this.$t("noPermissionUpdateFeaturedLabel")})},hideBsDropdown:function(){$(document).trigger("click.bs.dropdown.data-api")}}),computed:Ee(Ee({},P(be,{canEdit:t=>t.blockConfig.canEdit,featuredLabels:t=>t.blockConfig.featuredLabels})),{},{truncatedDescription:function(){if(!this.story.description)return null;var t=250;return this.story.attachment||(t=500),this.$options.filters.truncate(this.story.description,t)}})},(function(){var t=this,e=t._self._c;return e("article",{staticClass:"story-card"},[e("router-link",{staticClass:"story-card-link",attrs:{to:{name:"story",params:{ftid:t.story.ftID,id:t.story.submissionID}},"aria-label":t.story.title,"data-id":t.story.ftID+"-"+t.story.submissionID}},[e("div",{staticClass:"story-card-header"},[t.story.attachment&&"image"===t.story.attachment.type?[e("img",{staticClass:"media-image",attrs:{src:t.story.attachment.url,alt:""}})]:t.story.attachment&&"video"===t.story.attachment.type?[e("div",{staticClass:"media-video-container"},[e("img",{staticClass:"media-video",attrs:{src:t.story.attachment.thumbnail,alt:""}})]),t._v(" "),e("div",{staticClass:"video-play-overlay"},[e("i",{staticClass:"fa fa-play"})])]:t._e(),t._v(" "),t.story.featured&&t.story.attachment?e("featured-flag",{attrs:{label:t.story.featuredLabel.label||"Featured",colour:t.story.featuredLabel.colour}}):t._e(),t._v(" "),e("div",{staticClass:"story-card-media-overlay"})],2),t._v(" "),e("div",{staticClass:"story-card-body"},[t.story.featured&&!t.story.attachment?e("featured-flag",{attrs:{label:t.story.featuredLabel.label||"Featured",colour:t.story.featuredLabel.colour}}):t._e(),t._v(" "),e("h1",{staticClass:"story-card-title",attrs:{dir:"auto"}},[t._v("\n                "+t._s(t.story.title)+"\n            ")]),t._v(" "),e("div",{staticClass:"story-byline text-muted small"},[e("span",{staticClass:"author"},[e("b",[t._v(t._s(t.$t("postedBy",{username:t.story.username})))])]),t._v(" "),e("span",{staticClass:"line",attrs:{role:"presentation"}},[t._v("|")]),t._v(" "),e("time",{staticClass:"datetime",attrs:{datetime:t._f("formatDateISO")(t.story.submitted),title:t._f("formatDate")(t.story.submitted)}},[t._v(t._s(t._f("formatDateRelative")(t.story.submitted)))])]),t._v(" "),t.story.description?e("p",{attrs:{dir:"auto"},domProps:{innerHTML:t._s(t.truncatedDescription)}}):t._e(),t._v(" "),t.story.category?e("span",{staticClass:"sr-only"},[t._v(t._s(t.$t("categories"))+" ")]):t._e(),t._v(" "),t.story.category?e("div",{staticClass:"story-category-container text-muted small"},[e("span",{staticClass:"label story-category ljs"},[t._v(t._s(t.story.category))])]):t._e()],1),t._v(" "),e("div",{staticClass:"story-card-footer"},[e("div",{staticClass:"col-1"},[t.displayVoting?e("span",{staticClass:"vote-count"},[e("i",{staticClass:"fa fa-heart"}),t._v(" "+t._s(t.story.votes.up)+" "),e("span",{staticClass:"vote-count-label"},[t._v(t._s(t.$t("likes")))])]):t._e(),t._v(" "),t.enableCommenting?e("span",{staticClass:"comment-count"},[e("i",{staticClass:"fa fa-comment"}),t._v(" "+t._s(t.story.comments.count)+" "),e("span",{staticClass:"comment-count-label"},[t._v(t._s(t.$t("comments")))])]):t._e()]),t._v(" "),e("div",{staticClass:"col-2"},[t.canFlag&&t.featuredLabels.length?e("div",{staticClass:"text-right dropdown",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.hideBsDropdown.apply(null,arguments)}}},[e("button",{staticClass:"btn btn-mark-featured dropdown-toggle",class:{"flag-active":t.story.featured},attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:t.story.featured?t.$t("unmarkAsFeatured"):t.$t("markAsFeatured"),"aria-label":t.story.featured?t.$t("unmarkAsFeatured"):t.$t("markAsFeatured")}},[e("i",{staticClass:"fa fa-star"})]),t._v(" "),e("ul",{staticClass:"dropdown-menu dropdown-menu-right dropdown-menu-featured-labels"},[t.story.featured?e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){return t.flagStory(t.story)}}},[t._v(t._s(t.$t("remove")))])]):t._e(),t._v(" "),t.story.featured?e("li",{staticClass:"divider",attrs:{role:"separator"}}):t._e(),t._v(" "),t._l(t.featuredLabels,(function(r){return e("li",[e("a",{staticClass:"ljs",attrs:{href:"#"},on:{click:function(e){return t.flagStory(t.story,r.id)}}},[t._v(t._s(r.label))])])}))],2)]):t._e()])])])],1)}),[],!1,null,null,null),Pe=xe.exports;function Ae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function $e(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(r),!0).forEach((function(e){je(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function je(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ie=Se({name:"StoryCardPolaroid",components:{FeaturedFlag:Oe},props:{story:{type:Object},length:{type:Number,default:50},canFlag:{type:Boolean,default:!1},displayVoting:{type:Boolean},enableCommenting:{type:Boolean}},filters:{formatDate:function(t){return moment(t).format("LL")},formatDateTime:function(t){return moment(t).format("LLL")},formatDateISO:function(t){return moment(t).format()},truncate:function(t,e){if(void 0!==typeof t&&null!==t){if(t.length<=e)return t;for(var r=t.slice(0,e),o=r.length-1;o>0&&" "!==r[o]&&"."!==r[o];)o-=1;return o=o||e,(r=r.slice(0,o))+"&hellip;"}}},mounted:function(){this.$parent.$emit("vuemasonry.itemAdded",{element:this.$el});var t=this;imagesLoaded(this.$el,(function(){t.$parent.$emit("vuemasonry.imageLoaded",{element:t.$el})})),$(this.$el).find('[data-toggle="dropdown"]').dropdown()},beforeDestroy:function(){this.$parent.$emit("vuemasonry.itemRemoved",{element:this.$el})},watch:{"story.featured":function(){var t=this;Vue.nextTick((function(){t.$parent.$emit("vuemasonry.imageLoaded",{element:t.$el})}))}},methods:$e($e({},A(be,{flagStoryInStore:"flagStory"})),{},{flagStory:function(t,e){var r=this;this.canEdit?this.flagStoryInStore(t.submissionID,e).then((t=>{HiveAlerts.success({title:t?r.$t("markAsFeatured"):r.$t("unmarkAsFeatured"),message:r.$t("storyFlagChanged")})})):HiveAlerts.error({title:this.$t("accessDenied"),message:this.$t("noPermissionUpdateFeaturedLabel")})},hideBsDropdown:function(){$(document).trigger("click.bs.dropdown.data-api")}}),computed:$e($e({},P(be,{canEdit:t=>t.blockConfig.canEdit,featuredLabels:t=>t.blockConfig.featuredLabels})),{},{truncatedDescription:function(){if(!this.story.description)return null;return this.$options.filters.truncate(this.story.description,180)}})},(function(){var t=this,e=t._self._c;return e("article",{staticClass:"story-card polaroids"},[e("router-link",{staticClass:"story-card-link",attrs:{to:{name:"story",params:{ftid:t.story.ftID,id:t.story.submissionID}},"aria-label":t.story.title}},[e("div",{staticClass:"story-card-body"},[t.story.featured?e("featured-flag",{attrs:{label:t.story.featuredLabel.label||"Featured",colour:t.story.featuredLabel.colour}}):t._e(),t._v(" "),e("div",{staticClass:"story-byline text-muted small"},[e("time",{staticClass:"datetime",attrs:{datetime:t._f("formatDateISO")(t.story.submitted),title:t._f("formatDateTime")(t.story.submitted)}},[t._v(t._s(t._f("formatDate")(t.story.submitted)))]),t._v(" "),e("p",{staticClass:"author",domProps:{innerHTML:t._s(t.$t("userSays",{username:t.story.username}))}})]),t._v(" "),e("h1",{staticClass:"story-card-title",attrs:{dir:"auto"}},[t._v("\n                "+t._s(t.story.title)+"\n            ")]),t._v(" "),t.story.description?e("p",{attrs:{dir:"auto"},domProps:{innerHTML:t._s(t.truncatedDescription)}}):t._e()],1),t._v(" "),e("div",{staticClass:"story-card-footer"},[e("div",{staticClass:"col-1"},[t.displayVoting?e("span",{staticClass:"vote-count"},[e("i",{staticClass:"fa fa-heart"}),t._v(" "+t._s(t.story.votes.up)+" "),e("span",{staticClass:"sr-only"},[t._v(t._s(t.$t("likes")))])]):t._e(),t._v(" "),t.enableCommenting?e("span",{staticClass:"comment-count"},[e("i",{staticClass:"fa fa-comment"}),t._v(" "+t._s(t.story.comments.count)+" "),e("span",{staticClass:"sr-only"},[t._v(t._s(t.$t("comments")))])]):t._e()]),t._v(" "),e("div",{staticClass:"col-2"},[t.canFlag&&t.featuredLabels.length?e("div",{staticClass:"text-right dropdown",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.hideBsDropdown.apply(null,arguments)}}},[e("button",{staticClass:"btn btn-mark-featured dropdown-toggle",class:{"flag-active":t.story.featured},attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:t.story.featured?t.$t("unmarkAsFeatured"):t.$t("markAsFeatured"),"aria-label":t.story.featured?t.$t("unmarkAsFeatured"):t.$t("markAsFeatured")}},[e("i",{staticClass:"fa fa-star"})]),t._v(" "),e("ul",{staticClass:"dropdown-menu dropdown-menu-right dropdown-menu-featured-labels"},[t.story.featured?e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){return t.flagStory(t.story)}}},[t._v(t._s(t.$t("remove")))])]):t._e(),t._v(" "),t.story.featured?e("li",{staticClass:"divider",attrs:{role:"separator"}}):t._e(),t._v(" "),t._l(t.featuredLabels,(function(r){return e("li",[e("a",{staticClass:"ljs",attrs:{href:"#"},on:{click:function(e){return t.flagStory(t.story,r.id)}}},[t._v(t._s(r.label))])])}))],2)]):t._e()])])])],1)}),[],!1,null,null,null);function Re(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function Le(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Re(Object(r),!0).forEach((function(e){Ue(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ue(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Fe=Se({name:"Stories",props:["canFlag","enableCommenting","displayVoting","containerWidth"],inject:["trackEvent"],components:{StoryCard:Pe,StoryCardPolaroid:Ie.exports},watch:{containerWidth:function(){var t=this;Vue.nextTick((function(){t._masonryDraw()}))}},mounted:function(){this.masonry=new Masonry(this.$refs.cardContainer,{itemSelector:".story-card",percentPosition:!0,transitionDuration:0,isOriginLeft:!i18next||"rtl"!==i18next.dir()});var t=this;Vue.nextTick((function(){t._masonryDraw()})),this.$on("vuemasonry.itemAdded",(function(){t._masonryDraw()})),this.$on("vuemasonry.itemRemoved",(function(){t._masonryDraw()})),this.$on("vuemasonry.imageLoaded",(function(){t._masonryDraw()})),this.$on("vuemasonry.destroy",(function(){t.masonry.destroy()}))},beforeDestroy:function(){this.masonry.destroy()},methods:Le(Le({},A(be,{fetchDataInStore:"fetchData"})),{},{_masonryDraw:function(){this.masonry.reloadItems(),this.masonry.layout()},loadMore:function(){if(!this.pagination.hasNext)return;const t=this.pagination.currentPage+1;var e=this.stories.length;this.loadMoreButtonLoading=!0,this.fetchDataInStore(t).then((()=>{this.trackEvent("loadmore");var t=this.stories[e].submissionID;document.querySelector('[data-id="'+this.ftID+"-"+t+'"]').focus()})).finally((()=>{this.loadMoreButtonLoading=!1}))}}),data:function(){return{masonry:null,loadMoreButtonLoading:!1}},computed:Le(Le({},P(be,{bID:t=>t.blockMeta["b-id"],ftID:t=>t.blockMeta["ft-id"],loadingData:t=>t.blockUi.loadingData,stories:t=>t.stories,pagination:t=>t.pagination,hasFilters:t=>t.hasFilters(),cardTemplate:t=>t.blockConfig.cardTemplate})),{},{cardComponent(){return"polaroid"===this.cardTemplate?"StoryCardPolaroid":"StoryCard"}})},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"stories-container"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.loadingData,expression:"loadingData"}],staticClass:"loader",staticStyle:{display:"block"}}),t._v(" "),e("div",{ref:"cardContainer",staticClass:"clearfix stories"},t._l(t.stories,(function(r){return e(t.cardComponent,{key:r.id,tag:"component",attrs:{story:r,"can-flag":t.canFlag,"display-voting":t.displayVoting,"enable-commenting":t.enableCommenting}})})),1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loadingData&&t.hasFilters&&0===t.stories.length,expression:"!loadingData && hasFilters && stories.length === 0"}],staticClass:"alert alert-info"},[t._v("\n        "+t._s(t.$t("noSubmissionMatchingFilter"))+"\n    ")]),t._v(" "),t.pagination.hasNext&&!t.loadingData?e("div",{staticClass:"show-more-container text-center"},[e("button",{staticClass:"btn btn-primary btn-outline",class:{"is-loading":t.loadMoreButtonLoading},attrs:{type:"button",disabled:t.loadMoreButtonLoading},on:{click:function(e){return t.loadMore()}}},[t._v("\n            "+t._s(t.$t("showMore"))+"\n        ")])]):t._e()])}),[],!1,null,null,null).exports;function Ne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function Me(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(r),!0).forEach((function(e){Be(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Be(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ve=Se({name:"StoriesFilter",props:{displayCategoryFilter:{type:Boolean,default:!0},displayTypeFilter:{type:Boolean,default:!0},displayFeaturedFilter:{type:Boolean,default:!0}},methods:Me(Me({},A(be,["sortBy","resetFilters"])),{},{filterByCategory:function(t){this.HiveGatherDataStore.filterByCategory(t.target.dataset.value,t.target.text)},filterByFeatured:function(t){this.HiveGatherDataStore.filterByFeatured(t.target.dataset.value,t.target.text)},filterByType:function(t,e){this.HiveGatherDataStore.filterByType(t,e.target.text)}}),computed:Me(Me(Me({},P(be,{bID:t=>t.blockMeta["b-id"],filterCategoryText:t=>t.blockUi.filterCategoryText,filterTypeText:t=>t.blockUi.filterTypeText,filterStatusText:t=>t.blockUi.filterStatusText,categories:t=>t.blockConfig.categories,featuredLabels:t=>t.blockConfig.featuredLabels,sortingOptions:t=>t.blockConfig.sortingOptions,types:t=>t.blockConfig.types,hasFilters:t=>t.hasFilters(),filtersCount:t=>t.filtersCount()})),x(be)),{},{displayFilters:function(){return this.displayCategoryFilter||this.displayTypeFilter||this.displayFeaturedFilter},toggleFilters:function(){return[this.displayCategoryFilter,this.displayTypeFilter,this.displayFeaturedFilter].filter(Boolean).length>1},sortText:function(){if(!this.HiveGatherDataStore.blockUi.sortKey)return null;for(var t=0;t<this.sortingOptions.length;t++)if(this.sortingOptions[t].value===this.HiveGatherDataStore.blockUi.sortKey)return this.sortingOptions[t].label;return null}}),data:function(){return{filtersExpanded:!1}}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"stories-filter",class:{"filter-toggle":t.toggleFilters}},[e("div",{staticClass:"col-1"},[e("div",{staticClass:"search"},[e("label",{staticClass:"sr-only",attrs:{for:"seach-stories-"+t.bID}},[t._v(t._s(t.$t("searchStories")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.HiveGatherDataStore.blockUi.search,expression:"HiveGatherDataStore.blockUi.search"}],staticClass:"form-control",attrs:{type:"text",id:"seach-stories-"+t.bID,placeholder:t.$t("search")},domProps:{value:t.HiveGatherDataStore.blockUi.search},on:{input:function(e){e.target.composing||t.$set(t.HiveGatherDataStore.blockUi,"search",e.target.value)}}}),t._v(" "),e("i",{staticClass:"fa fa-search"})]),t._v(" "),e("div",{staticClass:"sort-by"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.HiveGatherDataStore.blockUi.sortKey,expression:"HiveGatherDataStore.blockUi.sortKey"}],staticClass:"form-control",attrs:{"aria-label":t.$t("sortBy")},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.HiveGatherDataStore.blockUi,"sortKey",e.target.multiple?r:r[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("sortBy")))]),t._v(" "),t._l(t.sortingOptions,(function(r){return e("option",{domProps:{value:r.value}},[t._v(t._s(r.label))])}))],2)])]),t._v(" "),t.displayFilters&&t.toggleFilters?e("div",{staticClass:"col-2"},[e("button",{staticClass:"btn btn-filters-toggle",attrs:{type:"button","aria-expanded":t.filtersExpanded,"aria-controls":"filters-"+t.bID},on:{click:function(e){t.filtersExpanded=!t.filtersExpanded}}},[t._v("\n                "+t._s(t.$t("filtersLabel"))+" "),t.filtersCount?e("span",[t._v("("+t._s(t.filtersCount)+")")]):t._e(),e("span",{staticClass:"expanded-state",attrs:{"aria-hidden":"true"}})])]):t._e(),t._v(" "),t.displayFilters?e("div",{staticClass:"col-3",class:{"filters-collapsed":!t.filtersExpanded&&t.toggleFilters},attrs:{id:"filters-"+t.bID}},[e("div",{staticClass:"filter-label hidden-xs"},[e("b",[t._v(t._s(t.$t("filterBy")))])]),t._v(" "),t.displayCategoryFilter&&t.categories?e("select",{directives:[{name:"model",rawName:"v-model",value:t.HiveGatherDataStore.blockUi.filterCategory,expression:"HiveGatherDataStore.blockUi.filterCategory"}],staticClass:"form-control",attrs:{"aria-label":t.$t("filters.category")},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.HiveGatherDataStore.blockUi,"filterCategory",e.target.multiple?r:r[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("filters.category")))]),t._v(" "),t._l(t.categories,(function(r){return e("option",{staticClass:"ljs",domProps:{value:r.category}},[t._v(t._s(r.category))])}))],2):t._e(),t._v(" "),t.displayTypeFilter&&t.types?e("select",{directives:[{name:"model",rawName:"v-model",value:t.HiveGatherDataStore.blockUi.filterType,expression:"HiveGatherDataStore.blockUi.filterType"}],staticClass:"form-control",attrs:{"aria-label":t.$t("filters.type")},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.HiveGatherDataStore.blockUi,"filterType",e.target.multiple?r:r[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("filters.type")))]),t._v(" "),e("option",{attrs:{value:"text"}},[t._v(t._s(t.$t("types.text")))]),t._v(" "),t.types.includes("image")?e("option",{attrs:{value:"image"}},[t._v(t._s(t.$t("types.image")))]):t._e(),t._v(" "),t.types.includes("video")?e("option",{attrs:{value:"video"}},[t._v(t._s(t.$t("types.video")))]):t._e()]):t._e(),t._v(" "),t.displayFeaturedFilter&&t.featuredLabels?e("select",{directives:[{name:"model",rawName:"v-model",value:t.HiveGatherDataStore.blockUi.filterStatus,expression:"HiveGatherDataStore.blockUi.filterStatus"}],staticClass:"form-control",attrs:{"aria-label":t.$t("filters.featured")},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.HiveGatherDataStore.blockUi,"filterStatus",e.target.multiple?r:r[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("filters.featured")))]),t._v(" "),t._l(t.featuredLabels,(function(r){return e("option",{staticClass:"ljs",domProps:{value:r.label}},[t._v(t._s(r.label))])}))],2):t._e(),t._v(" "),t.hasFilters?e("button",{staticClass:"btn btn-inline btn-link visible-xs",attrs:{type:"button"},on:{click:function(e){return t.resetFilters(!0)}}},[t._v(t._s(t.$t("filters.clear")))]):t._e(),t._v(" "),t.hasFilters?e("button",{staticClass:"btn btn-danger btn-outline btn-reset-filter hidden-xs",attrs:{type:"button","aria-label":t.$t("filters.reset")},on:{click:function(e){return t.resetFilters(!0)}}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]):t._e()]):t._e()])}),[],!1,null,null,null).exports,He=Math.floor,qe=Math.random;var We=function(t,e){return t+He(qe()*(e-t+1))};var Ge=function(t,e){return t===e||t!=t&&e!=e},ze="object"==typeof global&&global&&global.Object===Object&&global,Ye="object"==typeof self&&self&&self.Object===Object&&self,Ke=(ze||Ye||Function("return this")()).Symbol,Je=Object.prototype,Xe=Je.hasOwnProperty,Qe=Je.toString,Ze=Ke?Ke.toStringTag:void 0;var tr=function(t){var e=Xe.call(t,Ze),r=t[Ze];try{t[Ze]=void 0;var o=!0}catch(t){}var n=Qe.call(t);return o&&(e?t[Ze]=r:delete t[Ze]),n},er=Object.prototype.toString;var rr=function(t){return er.call(t)},or=Ke?Ke.toStringTag:void 0;var nr=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":or&&or in Object(t)?tr(t):rr(t)};var ir=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var sr=function(t){if(!ir(t))return!1;var e=nr(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var ar=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var lr=function(t){return null!=t&&ar(t.length)&&!sr(t)},cr=/^(?:0|[1-9]\d*)$/;var ur=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&cr.test(t))&&t>-1&&t%1==0&&t<e};var fr=function(t,e,r){if(!ir(r))return!1;var o=typeof e;return!!("number"==o?lr(r)&&ur(e,r.length):"string"==o&&e in r)&&Ge(r[e],t)},dr=/\s/;var pr=function(t){for(var e=t.length;e--&&dr.test(t.charAt(e)););return e},hr=/^\s+/;var mr=function(t){return t?t.slice(0,pr(t)+1).replace(hr,""):t};var vr=function(t){return null!=t&&"object"==typeof t};var yr=function(t){return"symbol"==typeof t||vr(t)&&"[object Symbol]"==nr(t)},gr=/^[-+]0x[0-9a-f]+$/i,br=/^0b[01]+$/i,_r=/^0o[0-7]+$/i,wr=parseInt;var Cr=function(t){if("number"==typeof t)return t;if(yr(t))return NaN;if(ir(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ir(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=mr(t);var r=br.test(t);return r||_r.test(t)?wr(t.slice(2),r?2:8):gr.test(t)?NaN:+t},Sr=1/0;var Dr=function(t){return t?(t=Cr(t))===Sr||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},Or=parseFloat,kr=Math.min,Er=Math.random;var Tr=function(t,e,r){if(r&&"boolean"!=typeof r&&fr(t,e,r)&&(e=r=void 0),void 0===r&&("boolean"==typeof e?(r=e,e=void 0):"boolean"==typeof t&&(r=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=Dr(t),void 0===e?(e=t,t=0):e=Dr(e)),t>e){var o=t;t=e,e=o}if(r||t%1||e%1){var n=Er();return kr(t+n*(e-t+Or("1e-"+((n+"").length-1))),e)}return We(t,e)},xr=Se({name:"Honeypot",props:{id:{default(){return Tr(1e7)}}},computed:{autocomplete(){return/Chrome/.test(window.navigator.userAgent)?"nope":"off"}}},(function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"none",visibility:"hidden"}},[e("label",{attrs:{for:"insert-your-email-"+t.id}},[t._v("\n        "+t._s(t.$t("honeypotLabel"))+"\n    ")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{type:"email",name:"insert-your-email",id:"insert-your-email-"+t.id,autocomplete:t.autocomplete}}),t._v(" "),e("label",{attrs:{for:"sweeter-input-"+t.id}},[t._v("\n        "+t._s(t.$t("honeypotLabel"))+"\n    ")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{type:"text",name:"sweeter-input",id:"sweeter-input-"+t.id,autocomplete:t.autocomplete}}),t._v(" "),e("label",{attrs:{for:"sweeter-text-area-"+t.id}},[t._v("\n        "+t._s(t.$t("honeypotLabel"))+"\n    ")]),t._v(" "),e("textarea",{staticClass:"form-control",attrs:{name:"sweeter-text-area",id:"sweeter-text-area-"+t.id,autocomplete:t.autocomplete}})])}),[],!1,null,null,null).exports;function Pr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function Ar(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pr(Object(r),!0).forEach((function(e){$r(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $r(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var jr={props:{config:{type:Object,default(){return{}}}},mounted(){this.isRecaptchaApiLoaded()?this.render():(window.recaptchaWidgetsToRender=window.recaptchaWidgetsToRender||[],window.recaptchaWidgetsToRender.push(this.render),window.onRecaptchaApiLoaded=this.renderRecaptchaWidgets,this.loadRecaptchaApi())},computed:{id(){return Tr(1e7)},options(){return{}}},methods:{isRecaptchaApiLoaded(){return void 0!==window.grecaptcha&&window.grecaptcha.hasOwnProperty("render")},loadRecaptchaApi(){const t=document.getElementsByTagName("head")[0],e="https://www.google.com/recaptcha/api.js?onload=onRecaptchaApiLoaded&amp;render=explicit";if(null!==t.querySelector('script[src="'+e+'"]'))return;const r=document.createElement("script");r.type="text/javascript",r.async=!0,r.defer=!0,r.src=e,t.appendChild(r)},renderRecaptchaWidgets(){if(window.recaptchaWidgetsToRender&&Array.isArray(window.recaptchaWidgetsToRender)){let t;for(;t=window.recaptchaWidgetsToRender.shift();)"function"==typeof t&&t()}},render(){if(null!==this.widgetId)return;const t=this.$el,e=Ar(Ar({},this.options),{},{callback:this.verified,"expired-callback":this.expired});this.widgetId=window.grecaptcha.render(t,e)},reset(){null!==this.widgetId&&window.grecaptcha.reset(this.widgetId)},verified(){},expired(){}},data(){return{widgetId:null}}},Ir=Se({name:"GoogleRecaptchaCheckbox",mixins:[jr],computed:{options(){return{sitekey:this.config.site_key,language:"auto",theme:"light"}}},methods:{verified(t){this.$nextTick((()=>{this.$emit("verified")}))},expired(){this.$nextTick((()=>{this.$emit("expired")}))}}},(function(){return(0,this._self._c)("div",{attrs:{id:"g-recaptcha-"+this.id}})}),[],!1,null,"182add51",null).exports,Rr=Se({name:"GoogleRecaptchaInvisible",mixins:[jr],computed:{options(){var t;return{size:"invisible",sitekey:this.config.site_key,language:(null===(t=this.config)||void 0===t?void 0:t.language)||"auto",badge:"inline"}}},methods:{execute(){window.grecaptcha.execute(this.widgetId)},verified(t){this.$nextTick((()=>{this.$emit("verified")}))},expired(){this.$nextTick((()=>{this.$emit("expired")}))}}},(function(){return(0,this._self._c)("div",{attrs:{id:"g-recaptcha-"+this.id}})}),[],!1,null,"37607e2b",null).exports;function Lr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function Ur(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Lr(Object(r),!0).forEach((function(e){Fr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Nr={name:"StoryForm",components:{Honeypot:xr,GoogleRecaptchaCheckbox:Ir,GoogleRecaptchaInvisible:Rr,PrivacyConsent:Se({name:"PrivacyConsent",props:{id:{required:!0},label:{type:String,required:!0},helpText:{type:String,default:""},errorMessage:{type:String,required:!0}},filters:{nl2br:function(t){return null==t?null:_.escape(t).replace(/(?:\r\n|\r|\n)/g,"<br />")}}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-group privacy-consent"},[e("div",{staticClass:"checkbox checkbox-single"},[e("input",{attrs:{id:t.id,name:"privacy_consent",type:"checkbox",value:"1",required:"required","data-msg-required":t.errorMessage}}),t._v(" "),e("label",{attrs:{for:t.id}},[e("span",[e("span",{staticClass:"ljs",domProps:{innerHTML:t._s(t.label)}}),t._v(" "),e("span",{staticClass:"text-muted small"},[t._v(t._s(t.$t("required")))])])]),t._v(" "),t.helpText?e("p",{staticClass:"help-text text-muted ljs",domProps:{innerHTML:t._s(t.$options.filters.nl2br(t.helpText))}}):t._e()])])}),[],!1,null,null,null).exports},props:{titleLimit:{type:Number,default:75},descriptionLimit:{type:Number,default:2e3},minWidth:{type:Number},minHeight:{type:Number},modalTitle:{type:String,default:"Post your story"}},inject:["trackEvent","antispam"],mounted:function(){this.tab=this.attachmentType&&1===this.attachmentType?"video":"image",jQuery.validator.addMethod("youtube",(function(t,e){return this.optional(e)||t.match(/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)}),this.$t("invalidYouTubeUrl")),jQuery.validator.addMethod("vimeo",(function(t,e){return this.optional(e)||t.match(/^(?:https?:\/\/)?(?:player\.|www\.)?(?:vimeo.com\/)(?:video\/)?(?:[^&?]+)/)}),this.$t("invalidVimeoUrl")),jQuery.validator.addMethod("videourl",(function(t,e){return $.validator.methods.youtube.apply(this,arguments)||$.validator.methods.vimeo.apply(this,arguments)}),this.$t("invalidVideoUrl")),jQuery.validator.addMethod("required-upload",(function(t,e){var r=$(e).closest(".file-upload");if(r.length){var o=r.find('[name="'+e.name+'Resized"]').val();return o&&o.length>0}return!0}),this.$t("fieldRequired")),$(this.$refs.form).validate({highlight:function(t){$(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block help-validation",errorPlacement:function(t,e){e.closest(".radioList, .checkboxList, .file-upload").length?t.appendTo(e.closest(".radioList, .checkboxList, .file-upload")):e.parent(".input-group, label, .checkbox").length?t.insertAfter(e.parent()):e.next(".help-block, .help-text").length>0?t.insertAfter(e.next()):t.insertAfter(e)}});var t=this;if($(window).on("signedin.hive",(function(e){t.formDisabled=!1,t.serverSideErrors=[]})),this.$refs.antispam){const t=this.$refs.antispam;this.formData.antispamCheck=!1,t.$on("verified",(()=>{this.formData.antispamCheck=!0})),t.$on("expired",(()=>{this.formData.antispamCheck=!1}))}this.$el.addEventListener("keydown",this.onKeyDown)},beforeDestroy:function(){this.$el.removeEventListener("keydown",this.onKeyDown)},methods:{onSubmit:function(t){var e=this,r=t.target,o=$(r);if(o.valid()){if(!this.formData.antispamCheck&&this.antispam.library&&"recaptcha2invisible"===this.antispam.library){const r=this.$refs.antispam;return r.$once("verified",(function(){e.onSubmit(t)})),void r.execute()}var n=new FormData(r);n.append("bID",e.bID);var i=e.baseUrl+"/stories/create";$.ajax({method:"POST",data:n,processData:!1,contentType:!1,dataType:"json",url:i,headers:{"X-Locale":window.CCM_ACTIVE_LOCALE||"en_US"},beforeSend:function(){e.submitLoading=!0},success:function(t){if(!0===t.status){e.serverSideErrors=[];var r=t.message.isPublished,n=e.$t("successMessage");r||(n+=" "+e.$t("pendingModeratorApproval")),HiveAlerts.success({title:e.$t("storySaved"),message:n}),e.formData.type="text",e.formData.title="",e.formData.description="",e.formData.categoryID="",e.formData.imageResized="",e.formData.imageResizedFilename="",e.formData.videoUrl="",e.filename=null,e.tab=1===e.attachmentType?"video":"image";var i=o.closest(".modal");i.one("hidden.bs.modal",(function(){void 0!==t.message&&r&&e.$router.push({name:"story",params:{ftid:t.message.ftID,id:t.message.submissionID}})})),i.modal("hide"),e.$emit("storysubmit",r),e.trackFormSubmission(),Vue.nextTick((function(){$(window).trigger($.Event("feedback.hive",{bID:e.bID,ftID:e.ftID}))}))}},error:function(t){var r=$.parseJSON(t.responseText);if("string"==typeof r.message?e.serverSideErrors=[r.message]:e.serverSideErrors=r.message,void 0!==r.sessionExpired&&!0===r.sessionExpired){var o={sessionExpired:!0,tokens:r.tokens};$(window).trigger($.Event("signedout.hive",o)),e.formDisabled=!0}},complete:function(){if(e.submitLoading=!1,e.$refs.antispam){e.$refs.antispam.reset(),e.formData.antispamCheck=!1}}})}},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;e.length&&(this._loadImage(e[0]),t.target.value="")},removeImage:function(){var t=this;t.filename=null,t.formData.imageResized=null,t.formData.imageResizedFilename=null,Vue.nextTick((function(){var e=t.$el.querySelector(".form-file-button");e&&e.focus()}))},_loadImage:function(t){var e=this;if(t.type.match("image/.*")){window.loadImage(t,(function(r){"error"!==r.type&&(void 0!==e.minWidth&&r.width<e.minWidth?window.alert(e.$t("imageMinWidth",{pixels:e.minWidth})):void 0!==e.minHeight&&r.height<e.minHeight?window.alert(e.$t("imageMinHeight",{pixels:e.minHeight})):(e.filename=t.name,e.formData.imageResized=r.toDataURL("image/jpeg"),e.formData.imageResizedFilename=t.name.replace(/\.[^/.]+$/g,"")+".jpg",Vue.nextTick((function(){var t=e.$el.querySelector(".btn-remove-file");t&&t.focus()}))))}),{maxWidth:1600,maxHeight:1600,canvas:!0,downsamplingRatio:.5,orientation:!0})}else window.alert(this.$t("pleaseSelectImage"))},trackFormSubmission:function(){this.trackEvent("submit")},onKeyDown:function(t){var e=this;27===t.which&&(t.stopPropagation(),setTimeout((function(){document.querySelector('.hive-stories[data-bid="'+e.bID+'"] .btn-add-submission').focus()}),50))},closeModal:function(){var t=this;setTimeout((function(){document.querySelector('.hive-stories[data-bid="'+t.bID+'"] .btn-add-submission').focus()}),50)}},computed:Ur(Ur({},P(be,{baseUrl:t=>t.blockUrls.stories,bID:t=>t.blockMeta["b-id"],ftID:t=>t.blockMeta["ft-id"],user:t=>t.user,userAttr:t=>t.blockData.userAttr,userAttrFields:t=>t.blockData.userAttrFields,categories:t=>t.blockConfig.categories,types:t=>t.blockConfig.types,attachmentType:t=>t.blockConfig.attachmentType,requiresPrivacyConsent:t=>!0===t.blockConfig.privacyConsent,privacyConsentConfig:t=>t.blockConfig.privacyConsentConfig,displayCaptcha:t=>t.blockConfig.displayCaptchaStories})),{},{titleCharLeft:function(){return this.titleLimit-this.formData.title.length},descriptionCharLeft:function(){return this.descriptionLimit-this.formData.description.length},hasTextType:function(){return-1!==this.types.indexOf("text")},hasImageType:function(){return-1!==this.types.indexOf("image")},hasVideoType:function(){return-1!==this.types.indexOf("video")}}),watch:{"formData.title":function(t){t.length>this.titleLimit&&(this.formData.title=t.slice(0,this.titleLimit))},"formData.description":function(t){t.length>this.descriptionLimit&&(this.formData.description=t.slice(0,this.descriptionLimit))}},data:function(){return{submitLoading:!1,filename:null,tab:"image",formData:{type:"text",title:"",description:"",categoryID:"",imageResized:null,imageResizedFilename:null,videoUrl:"",akID:{},antispamCheck:!0},serverSideErrors:[],formDisabled:!1}}},Mr=Se(Nr,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal story-form-modal",attrs:{id:"storyFormModal-"+t.bID,tabindex:"-1",role:"dialog","aria-labelledby":"storyFormTitle-"+t.bID}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":t.$t("close"),title:t.$t("close")},on:{click:t.closeModal}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("")])]),t._v(" "),e("h1",{staticClass:"modal-title mod-h4 ljs",attrs:{id:"storyFormTitle-"+t.bID,tabindex:"-1"}},[t._v(t._s(t.modalTitle))])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"hive-stories-submission-form"},[e("form",{ref:"form",attrs:{action:"#",method:"post"},on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t.types&&t.types.length>1?e("div",{staticClass:"form-group"},[e("fieldset",[e("legend",{staticClass:"sr-only"},[t._v(t._s(t.$t("submissionType")))]),t._v(" "),e("div",{staticClass:"story-type-switch"},[t.hasTextType?[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.type,expression:"formData.type"}],attrs:{id:"story-type-text-"+t.bID,type:"radio",name:"type",value:"text"},domProps:{checked:t._q(t.formData.type,"text")},on:{change:function(e){return t.$set(t.formData,"type","text")}}}),t._v(" "),e("label",{attrs:{for:"story-type-text-"+t.bID}},[e("i",{staticClass:"fa fa-align-left hidden-xs",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("form.types.text"))+"\n                                        ")])]:t._e(),t._v(" "),t.hasImageType?[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.type,expression:"formData.type"}],attrs:{id:"story-type-image-"+t.bID,type:"radio",name:"type",value:"image"},domProps:{checked:t._q(t.formData.type,"image")},on:{change:function(e){return t.$set(t.formData,"type","image")}}}),t._v(" "),e("label",{attrs:{for:"story-type-image-"+t.bID}},[e("i",{staticClass:"fa fa-camera hidden-xs",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("form.types.image"))+"\n                                        ")])]:t._e(),t._v(" "),t.hasVideoType?[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.type,expression:"formData.type"}],attrs:{id:"story-type-video-"+t.bID,type:"radio",name:"type",value:"video"},domProps:{checked:t._q(t.formData.type,"video")},on:{change:function(e){return t.$set(t.formData,"type","video")}}}),t._v(" "),e("label",{attrs:{for:"story-type-video-"+t.bID}},[e("i",{staticClass:"fa fa-video-camera hidden-xs",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("form.types.video"))+"\n                                        ")])]:t._e()],2)])]):t._e(),t._v(" "),"text"!==t.formData.type?e("div",{staticClass:"multimedia-upload-wrap"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"image"===t.formData.type,expression:"formData.type === 'image'"}],staticClass:"multimedia-upload-image"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"file-upload-label control-label"},[t._v(t._s(t.$t("form.image.label"))+" "),e("span",{staticClass:"text-muted small"},[t._v(t._s(t.$t("required")))])]),t._v(" "),e("span",{staticClass:"help-block small"},[t._v(t._s(t.$t("form.image.description")))]),t._v(" "),e("div",{staticClass:"file-upload"},[e("div",{staticClass:"input-group"},[e("div",{staticClass:"form-control-static",class:{disabled:t.formDisabled}},[t._v("\n                                                "+t._s(t.filename||t.$t("noFileSelected"))+"\n                                            ")]),t._v(" "),e("div",{staticClass:"input-group-addon"},[e("input",{staticClass:"form-control form-file",attrs:{type:"file",name:"image",accept:"image/*",id:"storyImage-"+t.bID,tabindex:t.filename?-1:0,"data-rule-required-upload":"image"===t.formData.type,disabled:t.formDisabled},on:{change:t.onFileChange}}),t._v(" "),t.filename?t._e():e("label",{staticClass:"form-file-button",attrs:{for:"storyImage-"+t.bID}},[t._v("\n                                                    "+t._s(t.$t("chooseFile"))+"\n                                                ")]),t._v(" "),t.filename?e("button",{staticClass:"btn btn-remove-file",attrs:{type:"button",title:t.$t("clearSelectedFile"),disabled:t.formDisabled},on:{click:t.removeImage}},[e("span",{staticClass:"fa fa-remove"})]):t._e(),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.imageResized,expression:"formData.imageResized"}],attrs:{type:"hidden",name:"imageResized"},domProps:{value:t.formData.imageResized},on:{input:function(e){e.target.composing||t.$set(t.formData,"imageResized",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.imageResizedFilename,expression:"formData.imageResizedFilename"}],attrs:{type:"hidden",name:"imageResizedFilename"},domProps:{value:t.formData.imageResizedFilename},on:{input:function(e){e.target.composing||t.$set(t.formData,"imageResizedFilename",e.target.value)}}})])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"video"===t.formData.type,expression:"formData.type === 'video'"}],staticClass:"multimedia-upload-video"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:"videoUrl-"+t.bID}},[t._v(t._s(t.$t("form.video.label"))+" "),e("span",{staticClass:"text-muted small"},[t._v(t._s(t.$t("required")))])]),t._v(" "),e("span",{staticClass:"help-block small"},[t._v(t._s(t.$t("form.video.description",{exampleUrl:"https://youtu.be/D6Ac5JpCHmI"})))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.videoUrl,expression:"formData.videoUrl"}],staticClass:"form-control",attrs:{type:"url",name:"videoUrl",id:"videoUrl-"+t.bID,"data-rule-videourl":"",required:"video"===t.formData.type,disabled:t.formDisabled},domProps:{value:t.formData.videoUrl},on:{input:function(e){e.target.composing||t.$set(t.formData,"videoUrl",e.target.value)}}})])])]):t._e(),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:"storyTitle-"+t.bID}},[t._v(t._s(t.$t("form.title.label"))+" "),e("span",{staticClass:"text-muted small"},[t._v(t._s(t.$t("required")))])]),t._v(" "),e("span",{staticClass:"help-block small"},[t._v(t._s(t.$t("form.title.description"))+" ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.title,expression:"formData.title"}],staticClass:"form-control",attrs:{type:"text",name:"title",id:"storyTitle-"+t.bID,required:"",disabled:t.formDisabled},domProps:{value:t.formData.title},on:{input:function(e){e.target.composing||t.$set(t.formData,"title",e.target.value)}}}),t._v(" "),e("p",{staticClass:"help-text small text-right",domProps:{innerHTML:t._s(t.$t("charactersLeft",{chars:t.titleCharLeft}))}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:"storyDescription-"+t.bID}},[t._v(t._s(t.$t("form.submission.label"))+" "),e("span",{staticClass:"text-muted small"},[t._v(t._s(t.$t("required")))])]),t._v(" "),e("span",{staticClass:"help-block small"},[t._v(t._s(t.$t("form.submission.description"))+" ")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.description,expression:"formData.description"}],staticClass:"form-control",attrs:{name:"description",id:"storyDescription-"+t.bID,required:"",disabled:t.formDisabled},domProps:{value:t.formData.description},on:{input:function(e){e.target.composing||t.$set(t.formData,"description",e.target.value)}}}),t._v(" "),e("p",{staticClass:"help-text small text-right",domProps:{innerHTML:t._s(t.$t("charactersLeft",{chars:t.descriptionCharLeft}))}})]),t._v(" "),t.categories&&t.categories.length?e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:"storyCategory-"+t.bID}},[t._v(t._s(t.$t("form.category.label"))+" "),e("span",{staticClass:"text-muted small"},[t._v(t._s(t.$t("required")))])]),t._v(" "),e("span",{staticClass:"help-block small"},[t._v(t._s(t.$t("form.category.description")))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.categoryID,expression:"formData.categoryID"}],staticClass:"form-control",attrs:{id:"storyCategory-"+t.bID,name:"categoryID",required:"",disabled:t.formDisabled},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.formData,"categoryID",e.target.multiple?r:r[0])}}},[e("option",{attrs:{value:"",disabled:""}},[t._v(t._s(t.$t("form.category.placeholder")))]),t._v(" "),t._l(t.categories,(function(r){return e("option",{staticClass:"ljs",domProps:{value:r.id}},[t._v(t._s(r.category))])}))],2)]):t._e(),t._v(" "),e("div",{staticClass:"feedback-form-container"},[t._l(Object.keys(t.userAttr),(function(r){return["username"===r?[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.user.userName||!t.user.isLoggedIn,expression:"!user.userName || !user.isLoggedIn"}],staticClass:"form-col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:"username-"+t.bID}},[t._v(t._s(t.$t("screenName"))+" "),+t.userAttr.username?e("span",{staticClass:"text-muted small"},[t._v(t._s(t.$t("required")))]):t._e()]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.userName,expression:"user.userName"}],staticClass:"username form-control",attrs:{type:"text",id:"username-"+t.bID,name:"akID[username]",required:!!+t.userAttr.username,maxlength:"20",disabled:t.formDisabled},domProps:{value:t.user.userName},on:{input:function(e){e.target.composing||t.$set(t.user,"userName",e.target.value)}}})])])]:"email"===r?[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.user.userEmail||!t.user.isLoggedIn,expression:"!user.userEmail || !user.isLoggedIn"}],staticClass:"form-col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:"email-"+t.bID}},[t._v(t._s(t.$t("email"))+" "),+t.userAttr.email?e("span",{staticClass:"text-muted small"},[t._v(t._s(t.$t("required")))]):t._e()]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.userEmail,expression:"user.userEmail"}],staticClass:"email form-control",attrs:{type:"email",id:"email-"+t.bID,name:"akID[email]",required:!!+t.userAttr.email,disabled:t.formDisabled},domProps:{value:t.user.userEmail},on:{input:function(e){e.target.composing||t.$set(t.user,"userEmail",e.target.value)}}})])])]:[e("div",{staticClass:"form-col-sm-12",domProps:{innerHTML:t._s(t.userAttrFields[r][+t.userAttr[r]?"required":"optional"])}})]]}))],2),t._v(" "),t.requiresPrivacyConsent?e("privacy-consent",{attrs:{id:"privacy-consent"+t.bID,label:t.privacyConsentConfig.label,"help-text":t.privacyConsentConfig.helpText,"error-message":t.privacyConsentConfig.errorMessage}}):t._e(),t._v(" "),e("honeypot",{staticClass:"form-group"}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.displayCaptcha&&t.antispam.component,expression:"displayCaptcha && antispam.component"}],staticClass:"form-group"},[e("div",{staticClass:"captcha-security"},[e(t.antispam.component,{ref:"antispam",tag:"component",attrs:{config:t.antispam.config}})],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"/moderation",target:"_blank"}},[t._v("\n                                "+t._s(t.$t("form.moderationPolicy"))+"\n                            ")])]),t._v(" "),e("div",{staticClass:"clearfix"}),t._v(" "),t.serverSideErrors.length?e("div",{staticClass:"alert alert-danger alert-server-error",attrs:{role:"alert"}},[e("ul",t._l(t.serverSideErrors,(function(r){return e("li",{domProps:{innerHTML:t._s(r)}})})),0)]):t._e(),t._v(" "),e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-block btn-primary",class:{"is-loading":t.submitLoading},attrs:{type:"submit",disabled:t.submitLoading||t.formDisabled}},[t._v(t._s(t.$t("submit")))])])],1)])])])])])}),[],!1,null,null,null),Br=Mr.exports;function Vr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function Hr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vr(Object(r),!0).forEach((function(e){qr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Wr={name:"StoryCommentsForm",components:{Honeypot:xr,GoogleRecaptchaCheckbox:Ir,GoogleRecaptchaInvisible:Rr},props:{feedbackId:{type:Number},comment:{type:Object}},inject:["antispam"],mounted:function(){var t=$(this.$refs.form),e=Math.random().toString(36).substr(2,5);t.find("label[for]").each((function(r,o){var n=$(o),i=n.attr("for");n.attr("for",i+"-"+e),t.find('[id="'+i+'"]').attr("id",i+"-"+e)})),t.validate({highlight:function(t){$(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block help-validation",errorPlacement:function(t,e){e.closest(".radioList, .checkboxList").length?t.appendTo(e.closest(".radioList, .checkboxList")):e.parent(".input-group, label, .checkbox").length?t.insertAfter(e.parent()):e.closest(".form-group").find(".help-block").length>0?t.insertAfter(e.next()):t.insertAfter(e)}});var r=this;if($(window).on("signedin.hive",(function(){r.errors=[]})),this.$refs.antispam){this.formData.antispamCheck=!1;const t=this.$refs.antispam;t.$on("verified",(()=>{this.formData.antispamCheck=!0})),t.$on("expired",(()=>{this.formData.antispamCheck=!1}))}},methods:{cancelForm:function(){this.$emit("cancelForm"),$("#story-add-comment-"+this.bID).focus()},onSubmitComment:function(t){var e=this,r=t.target;if($(r).valid()){if(!this.formData.antispamCheck&&this.antispam.library&&"recaptcha2invisible"===this.antispam.library){const r=this.$refs.antispam;return r.$once("verified",(function(){e.onSubmitComment(t)})),void r.execute()}var o=new FormData(r);o.append("bID",e.bID);var n=e.baseUrl+"/"+this.feedbackId+"/comments/create";$.ajax({method:"POST",data:o,processData:!1,contentType:!1,dataType:"json",url:n,headers:{"X-Locale":window.CCM_ACTIVE_LOCALE||"en_US"},beforeSend:function(){e.submitCommentLoading=!0,e.formErrors=[],e.errors=[]},success:function(t){!0===t.status&&($(r).resetForm(),HiveAlerts.success({title:e.$t("commentSaved"),message:e.$t("commentSavedSuccessfully")}),e.$emit("submitComment",t.message),$("#story-add-comment-"+e.bID).focus())},error:function(t){var r=$.parseJSON(t.responseText);if(void 0!==r.sessionExpired&&!0===r.sessionExpired){var o={sessionExpired:!0,tokens:r.tokens};"string"==typeof r.message&&(e.errors=[r.message]),$(window).trigger($.Event("signedout.hive",o))}else"string"==typeof r.message?e.formErrors=[r.message]:e.formErrors=r.message},complete:function(){if(e.submitCommentLoading=!1,e.$refs.antispam){e.$refs.antispam.reset(),e.formData.antispamCheck=!1}}})}},showSignModal:function(t){var e=$(t.target).attr("data-target");e&&this.$emit("showSignModal",e)}},computed:Hr(Hr({},P(be,{baseUrl:t=>t.blockUrls.comments,bID:t=>t.blockMeta["b-id"],userAttr:t=>t.blockData.commentsUserAttr,userAttrFields:t=>t.blockData.userAttrFields,displayCaptcha:t=>t.blockConfig.displayCaptchaComments,canUserPost:t=>t.canUserPost,user:t=>t.user})),{},{parentSubmissionID:function(){return this.comment?this.comment.submissionID:0},submissionLevel:function(){return this.comment?this.comment.submissionLevel+1:0}}),data:function(){return{submitCommentLoading:!1,formErrors:[],errors:[],formData:{antispamCheck:!0}}}},Gr=Se(Wr,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"story-comment-form"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.canUserPost,expression:"!canUserPost"}],staticClass:"alert alert-info mod-login-lg js-alert-registered-only"},[e("div",{staticClass:"alert-col"},[e("strong",[t._v(t._s(t.$t("joinConversationToday")))]),t._v(" "),e("p",[t._v(t._s(t.$t("createAccountPrompt")))]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-target":"#signUpModal"},on:{click:function(e){return e.preventDefault(),t.showSignModal(e)}}},[t._v(t._s(t.$t("signUp")))]),t._v(" "),e("button",{staticClass:"btn btn-primary btn-inverse",attrs:{"data-target":"#loginModal"},on:{click:function(e){return e.preventDefault(),t.showSignModal(e)}}},[t._v(t._s(t.$t("login")))])])]),t._v(" "),t.errors&&t.errors.length?e("div",{staticClass:"alert alert-danger js-alert-error",attrs:{role:"alert"}},t._l(t.errors,(function(r){return e("div",{domProps:{innerHTML:t._s(r)}})})),0):t._e(),t._v(" "),e("form",{directives:[{name:"show",rawName:"v-show",value:t.canUserPost,expression:"canUserPost"}],ref:"form",on:{submit:function(e){return e.preventDefault(),t.onSubmitComment.apply(null,arguments)}}},[e("div",{staticClass:"comment-form"},[t._l(Object.keys(t.userAttr),(function(r){return["username"===r?[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.user.userName||!t.user.isLoggedIn,expression:"!user.userName || !user.isLoggedIn"}],staticClass:"form-col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:"username-"+t.feedbackId}},[t._v("\n                                "+t._s(t.$t("screenName"))+"\n                                "),+t.userAttr.username?e("span",{staticClass:"text-muted small"},[t._v(t._s(t.$t("required")))]):t._e()]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.userName,expression:"user.userName"}],staticClass:"username form-control",attrs:{type:"text",id:"username-"+t.feedbackId,name:"akID[username]",required:!!+t.userAttr.username,maxlength:"20"},domProps:{value:t.user.userName},on:{input:function(e){e.target.composing||t.$set(t.user,"userName",e.target.value)}}})])])]:"email"===r?[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.user.userEmail||!t.user.isLoggedIn,expression:"!user.userEmail || !user.isLoggedIn"}],staticClass:"form-col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:"email-"+t.feedbackId}},[t._v("\n                                "+t._s(t.$t("email"))+"\n                                "),+t.userAttr.email?e("span",{staticClass:"text-muted small"},[t._v(t._s(t.$t("required")))]):t._e()]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.userEmail,expression:"user.userEmail"}],staticClass:"email form-control",attrs:{type:"email",id:"email-"+t.feedbackId,name:"akID[email]",required:!!+t.userAttr.email},domProps:{value:t.user.userEmail},on:{input:function(e){e.target.composing||t.$set(t.user,"userEmail",e.target.value)}}})])])]:[e("div",{staticClass:"form-col-sm-12",domProps:{innerHTML:t._s(t.userAttrFields[r][+t.userAttr[r]?"required":"optional"])}})]]})),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"comment-"+t.feedbackId}},[t._v("\n                    "+t._s(t.$t("comment"))+"\n                    "),e("span",{staticClass:"text-muted small"},[t._v(t._s(t.$t("required")))])]),t._v(" "),e("textarea",{staticClass:"form-control",attrs:{name:"comment",id:"comment-"+t.feedbackId,rows:"2",required:""}})]),t._v(" "),e("honeypot"),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.displayCaptcha&&t.antispam.component,expression:"displayCaptcha && antispam.component"}],staticClass:"form-group"},[e("div",{staticClass:"captcha-security"},[e(t.antispam.component,{ref:"antispam",tag:"component",attrs:{config:t.antispam.config}})],1)]),t._v(" "),t.formErrors&&t.formErrors.length?e("div",{staticClass:"alert alert-danger alert-server-error"},[e("ul",t._l(t.formErrors,(function(r){return e("li",{domProps:{innerHTML:t._s(r)}})})),0)]):t._e(),t._v(" "),e("input",{attrs:{type:"hidden",name:"parentSubmissionID"},domProps:{value:t.parentSubmissionID}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"submissionLevel"},domProps:{value:t.submissionLevel}}),t._v(" "),e("button",{staticClass:"btn btn-primary",class:{"is-loading":t.submitCommentLoading},attrs:{type:"submit",disabled:t.submitCommentLoading}},[t._v(t._s(t.$t("submit")))]),t._v(" "),e("button",{staticClass:"btn btn-default btn-outline btn-cancel",attrs:{type:"button"},on:{click:t.cancelForm}},[t._v(t._s(t.$t("cancel")))])],2)])])}),[],!1,null,null,null);function zr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function Yr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Kr={name:"StoryComments",components:{StoryCommentsForm:Gr.exports},props:{story:{type:Object,required:!0},feedbackId:{type:Number},mode:{type:String,default:"threaded",validator:function(t){return-1!==["threaded","flat"].indexOf(t)}}},filters:{formatDate:function(t){return moment(t).format("LLL")},formatDateRelative:function(t){return moment(t).fromNow()},formatDateISO:function(t){return moment(t).format()},nl2br:function(t){return null==t?null:_.escape(t).replace(/(?:\r\n|\r|\n)/g,"<br />")}},watch:{feedbackId:function(){this._resetData(),this.isLoading=!0,this.fetchData()},sortKey:function(){this._resetData(),this.isLoading=!0,this.fetchData()}},mounted:function(){this._resetData(),this.isLoading=!0,this.fetchData()},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zr(Object(r),!0).forEach((function(e){Yr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},P(be,{baseUrl:t=>t.blockUrls.comments,bID:t=>t.blockMeta["b-id"],isActive:t=>t.blockConfig.isActive})),methods:{fetchData:function(t){var e=this,r=[];t&&parseInt(t)>0&&r.push("page="+t),e.sortKey&&r.push("sort="+e.sortKey);var o=this.baseUrl+"/"+this.feedbackId+"/comments";r.length&&(o+="?"+r.join("&")),$.ajax({url:o,headers:{"X-Locale":window.CCM_ACTIVE_LOCALE||"en_US"},success:function(t){if(!0===t.status&&void 0!==t.results){for(var r=0;r<t.results.length;r++)e.comments.push(t.results[r]);e.pagination.currentPage=t.pagination.currentPage,e.pagination.hasNext=t.pagination.hasNext,e.pagination.totalItems=t.pagination.totalItems}}}).fail((function(t){JSON.parse(t.responseText)})).done((function(){e.isLoading=!1,e.loadMoreButtonLoading=!1}))},refreshTotalComments:function(){var t=this,e=this.baseUrl+"/"+this.feedbackId+"/comments";$.ajax({url:e,headers:{"X-Locale":window.CCM_ACTIVE_LOCALE||"en_US"},success:function(e){!0===e.status&&void 0!==e.pagination&&(t.pagination.totalItems=e.pagination.totalItems,t.$emit("totalCommentsUpdated",e.pagination.totalItems))}}).fail((function(t){JSON.parse(t.responseText)}))},onSubmitComment:function(t){this.showCommentForm=!1,t.isPublished?(this.isLoading=!0,this._resetData(),this.fetchData()):this.comments.splice(0,0,t),this.refreshTotalComments()},insertNewReply:function(t){var e=0;if(t.parentSubmissionID>0)for(var r=0;r<this.comments.length;r++)if(this.comments[r].submissionID===t.parentSubmissionID){e=r+1;break}this.comments.splice(e,0,t),this.showReplyForm=null,this.refreshTotalComments()},loadMore:function(){if(this.pagination.hasNext){this.loadMoreButtonLoading=!0,this.fetchData(this.pagination.currentPage+1)}},toggleCommentForm:function(){this.showCommentForm=!this.showCommentForm,this.showCommentForm&&setTimeout((function(){"undefined"!=typeof onLoadRecaptchaCallback&&onLoadRecaptchaCallback()}),1e3)},_resetData:function(){this.comments=[],this.pagination.currentPage=1,this.pagination.hasNext=!1},showSignModal:function(t){this.$emit("showSignModal",t)}},data:function(){return{isLoading:!1,loadMoreButtonLoading:!1,showCommentForm:!1,comments:[],pagination:{currentPage:1,hasNext:!1,totalItems:0},sortKey:null,sortText:null,showReplyForm:null}}};function Jr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function Xr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jr(Object(r),!0).forEach((function(e){Qr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Qr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Zr={name:"StoryModal",components:{FeaturedFlag:Oe,StoryComments:Se(Kr,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"comments",class:["comments-mode-"+t.mode]},[e("div",{staticClass:"row comments-header"},[e("div",{staticClass:"col-sm-7 comments-header-counter"},[e("h2",{staticClass:"mod-h5"},[e("i",{staticClass:"fa fa-comment"}),t._v(" "+t._s(t.$t("commentsCounter",{count:t.pagination.totalItems})))])]),t._v(" "),e("div",{staticClass:"col-sm-5 comments-header-button"},[e("div",{staticClass:"pull-right"},[t.isActive?e("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"story-add-comment-"+t.bID},on:{click:t.toggleCommentForm}},[t._v("\n                    "+t._s(t.$t("addComment"))+"\n                ")]):t._e()])])]),t._v(" "),t.isActive?e("story-comments-form",{directives:[{name:"show",rawName:"v-show",value:t.showCommentForm,expression:"showCommentForm"}],attrs:{"feedback-id":t.feedbackId},on:{cancelForm:function(e){t.showCommentForm=!1},submitComment:t.onSubmitComment,showSignModal:t.showSignModal}}):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loader",staticStyle:{display:"block"}}),t._v(" "),t.isLoading?t._e():e("div",[t.comments.length?e("div",{staticClass:"dropdown dropdown-filter mod-neutral dropdown-sort"},[e("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                "+t._s(t.sortText||t.$t("sortBy"))+" "),e("i",{staticClass:"caret"})]),t._v(" "),e("ul",{staticClass:"dropdown-menu dropdown-menu-left"},[e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.sortKey="recent",t.sortText="Most Recent"}}},[t._v(t._s(t.$t("mostRecent")))])]),t._v(" "),e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.sortKey="oldest",t.sortText="Oldest First"}}},[t._v(t._s(t.$t("oldestFirst")))])])])]):t._e(),t._v(" "),t._l(t.comments,(function(r){return t.comments.length?e("div",{staticClass:"comment-container"},[e("div",{staticClass:"comment",class:[{"comment-highlighted":r.isPostedBySiteUser},"comment-level-"+r.submissionLevel]},[e("h3",{staticClass:"sr-only"},[t._v(t._s(t.$t("level",{level:r.submissionLevel+1})))]),t._v(" "),e("div",{staticClass:"comment-avatar"},[e("img",{attrs:{src:r.avatar,alt:""}})]),t._v(" "),e("div",{staticClass:"story-byline"},[e("span",{staticClass:"author"},[e("b",[t._v(t._s(r.username))])]),t._v(" "),e("span",{staticClass:"line",attrs:{role:"presentation"}},[t._v("|")]),t._v(" "),e("time",{staticClass:"datetime",attrs:{datetime:t._f("formatDateISO")(r.submitted),title:t._f("formatDate")(r.submitted)}},[t._v(t._s(t._f("formatDateRelative")(r.submitted)))])]),t._v(" "),e("div",{staticClass:"comment-body"},[r&&!r.isPublished?e("div",{staticClass:"alert alert-info"},[t._v("\n                        "+t._s(t.$t("commentPendingApproval"))+"\n                    ")]):t._e(),t._v(" "),e("p",{attrs:{dir:"auto"},domProps:{innerHTML:t._s(t.$options.filters.nl2br(r.content))}})]),t._v(" "),t.isActive&&"threaded"===t.mode?e("div",{staticClass:"comment-actions"},[e("a",{staticClass:"btn-reply",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showReplyForm=r.submissionID}}},[t._v(t._s(t.$t("reply")))])]):t._e()]),t._v(" "),t.isActive&&t.showReplyForm===r.submissionID?e("story-comments-form",{class:"comment-level-"+(r.submissionLevel+1),attrs:{comment:r,"feedback-id":t.feedbackId},on:{cancelForm:function(e){t.showReplyForm=null},showSignModal:t.showSignModal,submitComment:t.insertNewReply}}):t._e()],1):t._e()})),t._v(" "),0===t.comments.length?e("div",{staticClass:"alert alert-info alert-no-comments"},[t.isActive?[t._v("\n                "+t._s(t.$t("noCommentsYetBeFirst"))+"\n            ")]:[t._v("\n                "+t._s(t.$t("noComments"))+"\n            ")]],2):t._e(),t._v(" "),t.pagination.hasNext&&!t.isLoading?e("div",{staticClass:"show-more-container text-center"},[e("button",{staticClass:"btn btn-primary btn-outline",class:{"is-loading":t.loadMoreButtonLoading},attrs:{type:"button",disabled:t.loadMoreButtonLoading},on:{click:function(e){return t.loadMore()}}},[t._v("\n                "+t._s(t.$t("showMore"))+"\n            ")])]):t._e()],2)],1)}),[],!1,null,null,null).exports},props:{enableVoting:{type:Boolean,default:!0},downVote:{type:Boolean,default:!0},displayVoting:{type:Boolean,default:!0},enableCommenting:{type:Boolean,default:!0},commentingMode:{type:String},socialShare:{type:Boolean,default:!0}},inject:["trackEvent"],filters:{formatDate:function(t){return moment(t).format("LLL")},formatDateRelative:function(t){return moment(t).fromNow()},formatDateISO:function(t){return moment(t).format()},nl2br:function(t){return null===t?null:_.escape(t).replace(/(?:\r\n|\r|\n)/g,"<br />")}},watch:{$route:function(t){void 0!==t.params.ftid&&t.params.ftid!=this.ftID||("story"!==t.name||void 0===t.params.id?(this.isOpen=!1,this.storyID=null):"story"===t.name&&void 0!==t.params.id&&(this.ensureContainingTabIsActive(),this.isOpen=!0,this.storyID=t.params.id))},storyID:function(t){t&&(this.story=null,this.trackStoryOpen(t),this.fetchData(t))},story:function(t){if(null!=t){var e=this;if(t.attachment&&"video"===t.attachment.type){var r;switch(e.videoPaddingTop="56.25%",t.attachment.videoService){case"youtube":r="https://youtube.com/watch?v="+t.attachment.videoId;break;case"vimeo":r="https://vimeo.com/"+t.attachment.videoId}r&&$.getJSON("https://noembed.com/embed",{format:"json",url:r},(function(t){void 0!==t.width&&void 0!==t.height&&(e.videoPaddingTop=parseInt(t.height,10)/parseInt(t.width,10)*100+"%")}))}Vue.nextTick((function(){e.enableFocusTrap()}))}else this.disableFocusTrap()},isOpen:function(t){t||this.disableFocusTrap();var e=$("body");if(t){if(0===e.find(".modal-backdrop").length){var r=$("<div/>").addClass("modal-backdrop in");e.append(r)}this.checkScrollbar(),this.setScrollbar(),e.addClass("modal-open")}else e.find(".modal-backdrop").remove(),e.removeClass("modal-open"),this.resetScrollbar();t?$(".modal").on("shown.bs.modal",this.disableFocusTrap).on("hidden.bs.modal",this.enableFocusTrap):$(".modal").off("shown.bs.modal",this.disableFocusTrap).off("hidden.bs.modal",this.enableFocusTrap)}},mounted:function(){"story"===this.$route.name&&void 0!==this.$route.params.ftid&&this.$route.params.ftid==this.ftID&&void 0!==this.$route.params.id&&(this.ensureContainingTabIsActive(),this.isOpen=!0,this.storyID=this.$route.params.id),this.$el.addEventListener("keydown",this.onKeyDown)},beforeDestroy:function(){this.$el.removeEventListener("keydown",this.onKeyDown)},methods:Xr(Xr({},A(be,{updateStoryCommentsCount:"updateStoryCommentsCount",updateStoryUpVotesCount:"updateStoryUpVotesCount"})),{},{ensureContainingTabIsActive:function(){var t=$(this.$el).closest(".jl_magic_tabs_main");if(t.length>0){var e=$('[aria-controls="'+t.attr("id")+'"');e.length&&0!=e.attr("aria-selected")&&e.trigger("click")}},enableFocusTrap:function(){$(".modal.in:not(.story-modal)").length||(this.isTrapActive=!0)},disableFocusTrap:function(){this.isTrapActive=!1},checkScrollbar:function(){var t=window.innerWidth;this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this._measureScrollbar()},setScrollbar:function(){var t=$("body"),e=parseInt(t.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&t.css("padding-right",e+this.scrollbarWidth)},resetScrollbar:function(){$("body").css("padding-right",this.originalBodyPad)},_measureScrollbar:function(){var t=$("body"),e=document.createElement("div");e.className="modal-scrollbar-measure",t.append(e);var r=e.offsetWidth-e.clientWidth;return t[0].removeChild(e),r},onKeyDown:function(t){this.isOpen&&this.isTrapActive&&27===t.which&&(t.stopPropagation(),this.closeModal())},fetchData:function(t){var e=this,r=this.baseUrl+"/stories/"+t;$.ajax({url:r,headers:{"X-Locale":window.CCM_ACTIVE_LOCALE||"en_US"},success:function(t){void 0!==t.story&&(e.story=t.story)}}).fail((function(t){var r=JSON.parse(t.responseText);HiveAlerts.error({title:e.$t("error"),message:r.message}),e.closeModal(!0)}))},closeModal:function(t){var e=this,r=this.storyID;void 0!==t&&!0===t?this.$router.replace("/"):this.$router.push("/"),this.isOpen=!1,this.disableFocusTrap(),setTimeout((function(){var t=document.querySelector('.story-card-link[data-id="'+e.ftID+"-"+r+'"]');null==t?document.querySelector('.hive-stories[data-bid="'+e.bID+'"] .story-card-link').focus():t.focus()}),50)},showSignModal:function(t){var e=this;this.disableFocusTrap(),Vue.nextTick((function(){$(t).modal("show"),$(".modal:not(.story-modal)").on("hidden.bs.modal",e._handleNonStoryModalClose)}))},_handleNonStoryModalClose:function(){1===$(".modal.in").length&&$(".modal.story-modal").hasClass("in")&&(this.enableFocusTrap(),$(".modal:not(.story-modal)").off("hidden.bs.modal",this._handleNonStoryModalClose))},reopenModal:function(){"story"!==this.$route.name||this.isOpen||(this.isOpen=!0,this.enableFocusTrap())},hasUserVotedOnStory:function(t,e){for(var r=this.getUserVotes(),o=0;o<r.length;o++)if(r[o].submissionID==t.submissionID&&r[o].voteType==e)return!0;return!1},getUserVotes:function(){var t=this;if(null===this.userVotes)if(this.isLoggedIn){t.userVotes=[];var e=this.baseUrl+"/votes";$.ajax({url:e,dataType:"json",async:!1,headers:{"X-Locale":window.CCM_ACTIVE_LOCALE||"en_US"},success:function(e){void 0!==e.votes&&(t.userVotes=e.votes)},error:function(e){401===e.status&&(t.isLoggedIn=!1),t.userVotes=t.getLocalStorageVotes()}})}else this.userVotes=this.getLocalStorageVotes();return this.userVotes},getLocalStorageVotes:function(){var t=JSON.parse(localStorage.getItem("the_hive_stories_votes"));return t&&"object"==typeof t||(t=[]),t},setLocalStorageVotes:function(t){if("object"!=typeof t)throw new Error("User stories must be an object");localStorage.setItem("the_hive_stories_votes",JSON.stringify(t))},voteStoryUp:function(t,e){return this._voteStory(t,1,e.currentTarget)},voteStoryDown:function(t,e){return this._voteStory(t,-1,e.currentTarget)},_voteStory:function(t,e,r){var o=this;if(void 0!==e){if(this.enableVoting){var n=this.getStoryVote(t);return o.votingActive=!1,n?n.voteType==e?this.cancelVote({submissionID:t.submissionID,voteID:n.voteID,hash:n.hash}).done((function(e){o._updateStoryVotesFromResponse(e,t),o.votingActive=!0,Vue.nextTick((function(){r.focus()}))})):this.cancelVote(n).done((function(){return o.postVote($.extend({},n,{voteType:e})).done((function(i){o._updateStoryVotesFromResponse(i,t),o.votingActive=!0,o.trackVote(n.submissionID,e),Vue.nextTick((function(){r.focus()}))}))})):n?void 0:this.postVote({submissionID:t.submissionID,voteType:e}).done((function(n){o._updateStoryVotesFromResponse(n,t),o.votingActive=!0,o.trackVote(t.submissionID,e),Vue.nextTick((function(){r.focus()}))}))}HiveAlerts.error({title:this.$t("votingDisabled"),message:this.$t("votingDisabledDesc")})}},_updateStoryVotesFromResponse:function(t,e){void 0!==t.upVotes&&null!==t.upVotes&&(e.votes.up=t.upVotes,this.updateUpVotes(t.upVotes)),void 0!==t.downVotes&&null!==t.downVotes&&(e.votes.down=t.downVotes)},getStoryVote:function(t){for(var e=this.getUserVotes(),r=0;r<e.length;r++)if(e[r].submissionID==parseInt(t.submissionID))return e[r];return null},postVote:function(t){var e=this;t.answerID;var r=this.baseUrl+"/stories/"+t.submissionID+"/votes/create",o={voteType:t.voteType};return $.ajax({type:"POST",url:r,data:o,headers:{"X-Locale":window.CCM_ACTIVE_LOCALE||"en_US"},success:function(r){if(HiveAlerts.success({title:e.$t("voteSaved"),message:r.message}),!e.isLoggedIn){var o=e.getLocalStorageVotes(),n={submissionID:t.submissionID,voteID:r.voteID,hash:r.hash,voteType:t.voteType};o.push(n),e.setLocalStorageVotes(o)}e.userVotes=null}}).fail((function(t){var r=$.parseJSON(t.responseText);HiveAlerts.error({title:e.$t("voteSaveFailed"),message:r.message})}))},cancelVote:function(t){var e=this;if(void 0===t.voteID)throw new Error("Missing vote ID");var r=this.baseUrl+"/stories/"+t.submissionID+"/votes/"+t.voteID+"/cancel",o={hash:t.hash};return $.ajax({type:"POST",url:r,data:o,headers:{"X-Locale":window.CCM_ACTIVE_LOCALE||"en_US"},success:function(r){if(HiveAlerts.success({title:e.$t("voteCancelled"),message:r.message}),!e.isLoggedIn){var o=e.getLocalStorageVotes();o=o.filter((function(e){return e.voteID!=t.voteID})),e.setLocalStorageVotes(o)}e.userVotes=null}}).fail((function(t){var r=$.parseJSON(t.responseText);HiveAlerts.error({title:e.$t("voteCancelled"),message:r.message})}))},trackVote:function(t,e){this.trackEvent("down",t)},trackStoryOpen:function(t){this.trackEvent("open",t)},updateTotalComments:function(t){this.story&&(this.story.comments.count=t,this.updateStoryCommentsCount(this.story.submissionID,t))},updateUpVotes:function(t){this.story&&this.updateStoryUpVotesCount(this.story.submissionID,t)}}),computed:Xr(Xr({},P(be,{baseUrl:t=>t.blockUrls.stories,bID:t=>t.blockMeta["b-id"],ftID:t=>t.blockMeta["ft-id"],isLoggedIn:t=>t.user.isLoggedIn})),{},{url:function(){return window.location}}),data:function(){return{story:null,storyID:null,videoPaddingTop:null,isOpen:!1,isTrapActive:!1,userVotes:null,votingActive:!0,originalBodyPad:0,bodyIsOverflowing:!1,scrollbarWidth:0}}},to=Se(Zr,(function(){var t=this,e=t._self._c;return e("wv-focus-trap",{staticClass:"modal story-modal",class:{in:t.isOpen},attrs:{"deactive-on-outside-click":!1,active:t.isTrapActive,tabindex:t.isOpen?0:-1,role:"dialog","aria-hidden":!t.isOpen,"aria-label":t.story&&t.story.title,"inital-focus":".story-modal-dialog .btn-close"}},[e("div",{staticClass:"story-modal-dialog",class:{"no-media":!t.story||!t.story.attachment},attrs:{role:"document"}},[e("div",{staticClass:"story-modal-content"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.story,expression:"!story"}],staticClass:"story-loader",attrs:{tabindex:"0"}},[e("div",{staticClass:"loader",staticStyle:{display:"block"}}),t._v(" "),e("span",{staticClass:"sr-only"},[t._v(t._s(t.$t("loading")))])]),t._v(" "),t.story&&t.story.attachment&&t.isOpen?e("div",{staticClass:"story-modal-media"},["image"===t.story.attachment.type?[e("img",{staticClass:"story-modal-media-image",attrs:{src:t.story.attachment.url,alt:""}})]:"video"===t.story.attachment.type?[e("div",{staticClass:"story-modal-media-video",style:{paddingTop:t.videoPaddingTop}},["youtube"===t.story.attachment.videoService?[e("iframe",{attrs:{src:"https://www.youtube.com/embed/"+t.story.attachment.videoId+"?rel=0&showinfo=0",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""}})]:"vimeo"===t.story.attachment.videoService?[e("iframe",{attrs:{src:"https://player.vimeo.com/video/"+t.story.attachment.videoId+"?title=0&byline=0&portrait=0",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""}})]:t._e()],2)]:t._e()],2):t._e(),t._v(" "),e("div",{staticClass:"story-modal-details"},[t.story?e("div",{staticClass:"story-modal-details-inner"},[e("div",{staticClass:"story-content-container"},[e("button",{staticClass:"btn btn-close",attrs:{type:"button","aria-label":t.$t("close")},on:{click:t.closeModal}},[e("span",{staticClass:"glyphicon glyphicon-remove"})]),t._v(" "),t.story.featured?e("featured-flag",{attrs:{label:t.story.featuredLabel.label||t.$t("featured"),colour:t.story.featuredLabel.colour}}):t._e(),t._v(" "),e("h1",{staticClass:"story-title mod-h3",attrs:{id:"storyModalTitle-"+t.bID}},[t._v(t._s(t.story.title))]),t._v(" "),e("div",{staticClass:"story-byline"},[e("span",{staticClass:"author"},[e("b",[t._v(t._s(t.$t("postedBy",{username:t.story.username})))])]),t._v(" "),e("span",{staticClass:"line",attrs:{role:"presentation"}},[t._v("|")]),t._v(" "),e("time",{staticClass:"datetime",attrs:{datetime:t._f("formatDateISO")(t.story.submitted),title:t._f("formatDate")(t.story.submitted)}},[t._v(t._s(t._f("formatDateRelative")(t.story.submitted)))])]),t._v(" "),e("div",{staticClass:"story-text"},[e("p",{domProps:{innerHTML:t._s(t.$options.filters.nl2br(t.story.description))}})]),t._v(" "),e("span",{staticClass:"sr-only"},[t._v(t._s(t.$t("categories"))+" ")]),t._v(" "),t.story.category?e("div",{staticClass:"story-category-container text-muted small"},[e("span",{staticClass:"label story-category ljs"},[t._v(t._s(t.story.category))])]):t._e()],1),t._v(" "),e("div",{staticClass:"story-buttons-container clearfix"},[t.displayVoting?[e("button",{staticClass:"btn btn-vote btn-vote-up",class:{"mod-voted":t.hasUserVotedOnStory(t.story,1)},attrs:{type:"button",disabled:!t.votingActive||!t.enableVoting},on:{click:function(e){return t.voteStoryUp(t.story,e)}}},[e("i",{staticClass:"fa fa-thumbs-up"}),t._v(" "),e("span",{staticClass:"hidden-xs",attrs:{"aria-hidden":"true"}},[t._v(t._s(t.$t("like"))+" (")]),e("span",{attrs:{"aria-hidden":"true"}},[t._v(t._s(t.story.votes.up))]),e("span",{staticClass:"hidden-xs",attrs:{"aria-hidden":"true"}},[t._v(")")]),t._v(" "),t.hasUserVotedOnStory(t.story,1)?e("span",{staticClass:"sr-only"},[t._v(t._s(t.$t("likePressed")))]):e("span",{staticClass:"sr-only"},[t._v(t._s(t.$t("like")))]),t._v(" "),e("span",{staticClass:"sr-only"},[t._v(t._s(t.story.votes.up))])]),t._v(" "),t.downVote?e("button",{staticClass:"btn btn-vote btn-vote-down",class:{"mod-voted":t.hasUserVotedOnStory(t.story,-1)},attrs:{type:"button",disabled:!t.votingActive||!t.enableVoting},on:{click:function(e){return t.voteStoryDown(t.story,e)}}},[e("i",{staticClass:"fa fa-thumbs-down"}),t._v(" "),e("span",{staticClass:"hidden-xs",attrs:{"aria-hidden":"true"}},[t._v(t._s(t.$t("dislike"))+" (")]),e("span",{attrs:{"aria-hidden":"true"}},[t._v(t._s(t.story.votes.down))]),e("span",{staticClass:"hidden-xs",attrs:{"aria-hidden":"true"}},[t._v(")")]),t._v(" "),t.hasUserVotedOnStory(t.story,-1)?e("span",{staticClass:"sr-only"},[t._v(t._s(t.$t("dislikePressed")))]):e("span",{staticClass:"sr-only"},[t._v(t._s(t.$t("dislike")))]),t._v(" "),e("span",{staticClass:"sr-only"},[t._v(t._s(t.story.votes.down))])]):t._e()]:t._e(),t._v(" "),e("div",{staticClass:"btn-share-container pull-right"},[t.socialShare&&t.story?e("button",{staticClass:"btn pull-right btn-share",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fa fa-share-alt"}),t._v(" "+t._s(t.$t("share"))+"\n                            ")]):t._e(),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(t.url),title:"Facebook",target:"_blank"}},[e("i",{staticClass:"fab fa-facebook"}),t._v(" "),e("span",{staticClass:"sr-only"},[t._v("Facebook")])])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.twitter.com/intent/tweet?url="+encodeURIComponent(t.url),title:"X",target:"_blank"}},[e("i",{staticClass:"fab fa-x-twitter"}),t._v(" "),e("span",{staticClass:"sr-only"},[t._v("X")])])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.linkedin.com/shareArticle?mini-true&url="+encodeURIComponent(t.url)+"&title="+encodeURIComponent(t.story.title),title:"LinkedIn",target:"_blank"}},[e("i",{staticClass:"fab fa-linkedin"}),t._v(" "),e("span",{staticClass:"sr-only"},[t._v("LinkedIn")])])])])])],2),t._v(" "),t.enableCommenting&&t.story?e("story-comments",{attrs:{story:t.story,"feedback-id":t.story.feedbackID,mode:t.commentingMode},on:{showSignModal:t.showSignModal,totalCommentsUpdated:t.updateTotalComments}}):t._e()],1):t._e()])])])])}),[],!1,null,null,null).exports;function eo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function ro(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?eo(Object(r),!0).forEach((function(e){oo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oo(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var no=new VueRouter({mode:"history",base:CCM_EDIT_MODE?null:CCM_PATH||"/",routes:[{path:"/story/:ftid/:id",name:"story"}]}),io=Se({name:"HiveGather",props:{id:{type:String},hivemeta:{type:Object},hiveconfig:{type:Object},hiveurls:{type:Object},user:{type:Object}},components:{CallToAction:De,FeaturedFlag:Oe,Stories:Fe,StoriesFilter:Ve,StoryForm:Br,StoryModal:to},router:no,watch:{"HiveGatherDataStore.blockUi.sortKey":function(){this.reloadData()},"HiveGatherDataStore.blockUi.filterCategory":function(){this.trackFiltering(),this.reloadData()},"HiveGatherDataStore.blockUi.filterStatus":function(){this.trackFiltering(),this.reloadData()},"HiveGatherDataStore.blockUi.filterType":function(){this.trackFiltering(),this.reloadData()},"HiveGatherDataStore.blockUi.search":function(){this.reloadData()},containerWidth:function(){this.updateLimit()},gutterWidth:function(){this.updateLimit()}},created:function(){this.HiveGatherDataStore.id=this.id,this.config.userAttr&&(this.HiveGatherDataStore.blockData.userAttr=this.config.userAttr),this.config.userAttrFields&&(this.HiveGatherDataStore.blockData.userAttrFields=this.config.userAttrFields),this.config.commentsUserAttr&&(this.HiveGatherDataStore.blockData.commentsUserAttr=this.config.commentsUserAttr),this.config.totalSubmissions&&(this.HiveGatherDataStore.totalSubmissions=this.config.totalSubmissions),this.HiveGatherDataStore.user=ro(ro({},this.HiveGatherDataStore.user),this.user),this.HiveGatherDataStore.blockMeta=this.hivemeta,this.HiveGatherDataStore.blockConfig=this.config,this.HiveGatherDataStore.blockUrls=this.hiveurls},mounted:function(){this.init()},methods:{init:function(){this.containerWidth=this.$el.offsetWidth,this.gutterWidth=this.getGutterWidth(),this.updateLimit(),window.addEventListener("resize",this.onWindowResize),this.loading=!1,this.fetchData();var t=this;$(window).on("signedin.hive",(function(e){t.HiveGatherDataStore.user={isLoggedIn:!0,userName:e.attributes.username,userEmail:e.attributes.email,attributes:e.attributes},t.userVotes=null})),$(window).on("signedout.hive",(function(){t.HiveGatherDataStore.user={isLoggedIn:!1,userName:null,userEmail:null,attributes:{}},t.userVotes=null})),$(window).on("jl_magic_tabs_show",(function(){t.$el.offsetParent&&t.onWindowResize()}))},onWindowResize:_.throttle((function(){this.containerWidth=this.$el.offsetWidth,this.gutterWidth=this.getGutterWidth()}),100),getGutterWidth:function(){var t=this.$el.closest(".row");return t?Math.abs(parseInt((t.currentStyle||window.getComputedStyle(t)).marginLeft)):0},updateLimit:function(){let t=3;this.containerWidth>=768-2*this.gutterWidth&&(t=12),this.HiveGatherDataStore.updatePaginationLimit(t)},reloadData:_.debounce((function(){this.HiveGatherDataStore.stories=[],this.fetchData()}),500),fetchData:function(t,e){const r=this.HiveGatherDataStore.fetchData(t);"function"==typeof e&&r.then(e)},onStorySubmit:function(t){t&&(this.HiveGatherDataStore.incrementTotalSubmissions(),this.HiveGatherDataStore.resetFiltersAndSort(),this.reloadData())},trackMatomoEvent(t,e){let r=[this.bID,this.ftID];e&&r.push(e),_paq.push(["trackEvent","the_hive_stories",t,r.join(";")])},trackFiltering:function(){this.trackMatomoEvent("filter")},getAntispamConfig(){var t,e;let r={component:null,config:{},library:null};const o=null===(t=this.config)||void 0===t||null===(e=t.antispamConfig)||void 0===e?void 0:e.library;if(o){var n;switch(o){case"recaptcha2checkbox":r.component="GoogleRecaptchaCheckbox";break;case"recaptcha2invisible":r.component="GoogleRecaptchaInvisible"}r.config=(null===(n=this.config)||void 0===n?void 0:n.antispamConfig[o])??{},r.library=o}return r}},computed:ro(ro(ro({},x(be)),P(be,{bID:t=>t.blockMeta["b-id"],ftID:t=>t.blockMeta["ft-id"]})),{},{blockClass:function(){return this.containerWidth>=1920-2*this.gutterWidth?"hive-block-desktop hive-block-desktop-xl":this.containerWidth>=1400-2*this.gutterWidth?"hive-block-desktop hive-block-desktop-lg":this.containerWidth>=1200-2*this.gutterWidth?"hive-block-desktop hive-block-desktop-md":this.containerWidth>=992-2*this.gutterWidth?"hive-block-desktop hive-block-desktop-sm":this.containerWidth>=768-2*this.gutterWidth?"hive-block-tablet":"hive-block-mobile"},activityStatusClass:function(){return this.config.activityStatus?"activity-open":"activity-closed"},activityCloseText:function(){if(!this.config.endDate)return"";const t=moment(this.config.endDate).format("L"),e=moment(this.config.endDate).format("LT");return this.config.activityStatus?this.$t("activityCloses",{date:t,time:e}):this.$t("activityClosed",{date:t,time:e})}}),data:function(){return{config:this.hiveconfig,containerWidth:null,gutterWidth:0,loading:!0}},provide(){return{trackEvent:this.trackMatomoEvent,antispam:this.getAntispamConfig()}}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"hive-stories",class:t.blockClass},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loader",staticStyle:{display:"block"}}),t._v(" "),e("call-to-action",{attrs:{"is-active":t.config.isActive,"requires-registration":t.config.requiresRegistration,title:t.config.title,"display-title":t.config.displayTitle,description:t.config.description,"display-description":t.config.displayDescription,"submission-counter":t.config.submissionCounter,"display-submission-counter":t.config.displaySubmissionCounter,"total-submissions":t.HiveGatherDataStore.totalSubmissions,"button-label":t.config.addStoryLabel}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"activity-info",class:t.activityStatusClass,staticStyle:{display:"none"}},[e("div",{staticClass:"activity-status"},[t._v("\n            "+t._s(t.config.activityStatus?t.$t("activityStatus.open"):t.$t("activityStatus.closed"))+"\n        ")]),t._v(" "),t.config.endDate?e("div",{staticClass:"activity-detail"},[t._v("\n            "+t._s(t.activityCloseText)+"\n        ")]):t._e()]),t._v(" "),e("story-form",{attrs:{"min-width":400,"min-height":300,"modal-title":t.config.addStoryLabel},on:{storysubmit:t.onStorySubmit}}),t._v(" "),e("stories-filter",{attrs:{"display-category-filter":t.config.displayCategoryFilter,"display-type-filter":t.config.displayTypeFilter,"display-featured-filter":t.config.displayFeaturedFilter}}),t._v(" "),e("stories",{attrs:{"can-flag":t.config.canEdit,"enable-commenting":t.config.enableCommenting,"display-voting":t.config.displayVoting,"container-width":t.containerWidth}}),t._v(" "),e("story-modal",{attrs:{"enable-voting":t.config.enableVoting,"down-vote":t.config.downVote,"display-voting":t.config.displayVoting,"enable-commenting":t.config.enableCommenting,"commenting-mode":t.config.commentingMode}})],1)}),[],!1,null,null,null).exports;Vue.component("hive-gather",io)}()}();